<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Knowledge acquisition personal's notes, blog drafts"><link href=https://jeromeboyer.net/data/cassandra/ rel=canonical><link href=../olap/ rel=prev><link href=../../techno/apicurio/ rel=next><link rel=icon href=../../images/logo-blue.drawio.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.5.39"><title>Cassandra - Jerome Boyer's Personal Site</title><link rel=stylesheet href=../../assets/stylesheets/main.8c3ca2c6.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#cassandra-summary class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Jerome Boyer's Personal Site" class="md-header__button md-logo" aria-label="Jerome Boyer's Personal Site" data-md-component=logo> <img src=../../images/logo.drawio.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Jerome Boyer's Personal Site </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Cassandra </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/jbcodeforce/jbcodeforce.github.io/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../about/ class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../coding/playground/ class=md-tabs__link> Coding </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../blogs/consultant-job/ class=md-tabs__link> Knowledge base </a> </li> <li class=md-tabs__item> <a href=../../techno/apicurio/ class=md-tabs__link> Techno </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Jerome Boyer's Personal Site" class="md-nav__button md-logo" aria-label="Jerome Boyer's Personal Site" data-md-component=logo> <img src=../../images/logo.drawio.png alt=logo> </a> Jerome Boyer's Personal Site </label> <div class=md-nav__source> <a href=https://github.com/jbcodeforce/jbcodeforce.github.io/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1 id=__nav_1_label tabindex=0> <span class=md-ellipsis> Home </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../about/ class=md-nav__link> <span class=md-ellipsis> About </span> </a> </li> <li class=md-nav__item> <a href=../../skills/ class=md-nav__link> <span class=md-ellipsis> Skills </span> </a> </li> <li class=md-nav__item> <a href=../../blogs/ class=md-nav__link> <span class=md-ellipsis> Blogs </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_4> <label class=md-nav__link for=__nav_1_4 id=__nav_1_4_label tabindex=0> <span class=md-ellipsis> Leasure </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_4_label aria-expanded=false> <label class=md-nav__title for=__nav_1_4> <span class="md-nav__icon md-icon"></span> Leasure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../astronomy/ class=md-nav__link> <span class=md-ellipsis> Astronomy </span> </a> </li> <li class=md-nav__item> <a href=../../astronomy/physic/ class=md-nav__link> <span class=md-ellipsis> Physic - Newton </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Coding </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Coding </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../coding/playground/ class=md-nav__link> <span class=md-ellipsis> Playground </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class=md-ellipsis> Dev & Ops </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Dev & Ops </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../coding/agile/ class=md-nav__link> <span class=md-ellipsis> Agile </span> </a> </li> <li class=md-nav__item> <a href=../../coding/git/ class=md-nav__link> <span class=md-ellipsis> Git summary </span> </a> </li> <li class=md-nav__item> <a href=../../coding/gitops/ class=md-nav__link> <span class=md-ellipsis> GitOps </span> </a> </li> <li class=md-nav__item> <a href=../../coding/tekton/ class=md-nav__link> <span class=md-ellipsis> Tekton </span> </a> </li> <li class=md-nav__item> <a href=../../coding/argocd/ class=md-nav__link> <span class=md-ellipsis> ArgoCD </span> </a> </li> <li class=md-nav__item> <a href=../../coding/finch/ class=md-nav__link> <span class=md-ellipsis> Finch </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> Fun problems </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Fun problems </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../fun/puzzles/ class=md-nav__link> <span class=md-ellipsis> puzzles </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4 id=__nav_2_4_label tabindex=0> <span class=md-ellipsis> Java </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Java </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../java/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../java/FAQ/ class=md-nav__link> <span class=md-ellipsis> Java FAQ </span> </a> </li> <li class=md-nav__item> <a href=../../java/concurrent/ class=md-nav__link> <span class=md-ellipsis> Concurrency </span> </a> </li> <li class=md-nav__item> <a href=../../java/funqy/ class=md-nav__link> <span class=md-ellipsis> Funqy </span> </a> </li> <li class=md-nav__item> <a href=../../java/microprofile/ class=md-nav__link> <span class=md-ellipsis> Microprofile 3.x </span> </a> </li> <li class=md-nav__item> <a href=../../java/openliberty/ class=md-nav__link> <span class=md-ellipsis> Open Liberty </span> </a> </li> <li class=md-nav__item> <a href=../../java/quarkus/ class=md-nav__link> <span class=md-ellipsis> Quarkus </span> </a> </li> <li class=md-nav__item> <a href=../../java/restassured/ class=md-nav__link> <span class=md-ellipsis> Rest assured </span> </a> </li> <li class=md-nav__item> <a href=../../java/springcloud/ class=md-nav__link> <span class=md-ellipsis> SpringCloud </span> </a> </li> <li class=md-nav__item> <a href=../../coding/testcontainer/ class=md-nav__link> <span class=md-ellipsis> TestContainer </span> </a> </li> <li class=md-nav__item> <a href=../../java/vertx/ class=md-nav__link> <span class=md-ellipsis> Vert.x </span> </a> </li> <li class=md-nav__item> <a href=../../java/java-vscode/ class=md-nav__link> <span class=md-ellipsis> VScode </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../techno/podman/ class=md-nav__link> <span class=md-ellipsis> Podman </span> </a> </li> <li class=md-nav__item> <a href=../../coding/reactjs/ class=md-nav__link> <span class=md-ellipsis> React.js & next.js </span> </a> </li> <li class=md-nav__item> <a href=../../coding/istio/ class=md-nav__link> <span class=md-ellipsis> istio </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/python-code class=md-nav__link> <span class=md-ellipsis> Python </span> </a> </li> <li class=md-nav__item> <a href=../../coding/knative/ class=md-nav__link> <span class=md-ellipsis> Knative </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/vuejs-studies/ class=md-nav__link> <span class=md-ellipsis> Vue.js Studies </span> </a> </li> <li class=md-nav__item> <a href=https://cloudnative101.dev/ class=md-nav__link> <span class=md-ellipsis> Cloud native content IBM </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/angular-sandbox/ class=md-nav__link> <span class=md-ellipsis> Angular </span> </a> </li> <li class=md-nav__item> <a href=../../code-template/ class=md-nav__link> <span class=md-ellipsis> My code templates </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Knowledge base </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Knowledge base </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../blogs/consultant-job/ class=md-nav__link> <span class=md-ellipsis> The SA job </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> <span class=md-ellipsis> Leadership </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Leadership </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../leadership/first-90-days/ class=md-nav__link> <span class=md-ellipsis> 90 Days </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class=md-ellipsis> Architecture </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../architecture/system-design/ class=md-nav__link> <span class=md-ellipsis> Conduct System Design </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/eda-studies class=md-nav__link> <span class=md-ellipsis> Event Driven Architecture </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/tcpip/ class=md-nav__link> <span class=md-ellipsis> TPC/IP summary </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/flow-architectures/ class=md-nav__link> <span class=md-ellipsis> Flow architectures </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/streaming/ class=md-nav__link> <span class=md-ellipsis> Streaming processing </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/architectural-decisions/ class=md-nav__link> <span class=md-ellipsis> Architecture decision </span> </a> </li> <li class=md-nav__item> <a href="https://jbcodef orce.github.io/eda-studies/ddd" class=md-nav__link> <span class=md-ellipsis> DDD </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/DR/ class=md-nav__link> <span class=md-ellipsis> Disaster recovery </span> </a> </li> <li class=md-nav__item> <a href=../../coding/istio/ class=md-nav__link> <span class=md-ellipsis> istio </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/openshift-studies class=md-nav__link> <span class=md-ellipsis> Openshift Studies </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class=md-ellipsis> Methodology </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Methodology </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../methodology/design-thinking/ class=md-nav__link> <span class=md-ellipsis> Design Thinking </span> </a> </li> <li class=md-nav__item> <a href=../../methodology/data-intensive/ class=md-nav__link> <span class=md-ellipsis> Data intensive </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/eda-studies/event-storming/ class=md-nav__link> <span class=md-ellipsis> Event Storming </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/eda-studies/ddd/ class=md-nav__link> <span class=md-ellipsis> Domain driven design </span> </a> </li> <li class=md-nav__item> <a href=../../methodology/lean-startup/ class=md-nav__link> <span class=md-ellipsis> Lean startup </span> </a> </li> <li class=md-nav__item> <a href=../../methodology/pm/ class=md-nav__link> <span class=md-ellipsis> Product manager </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_7> <label class=md-nav__link for=__nav_3_4_7 id=__nav_3_4_7_label tabindex=0> <span class=md-ellipsis> ABRD </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_4_7_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4_7> <span class="md-nav__icon md-icon"></span> ABRD </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../methodology/abrd/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../methodology/abrd/concept/ class=md-nav__link> <span class=md-ellipsis> Concepts </span> </a> </li> <li class=md-nav__item> <a href=../../methodology/abrd/harvesting/ class=md-nav__link> <span class=md-ellipsis> Rule Harvesting </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../methodology/narrative/ class=md-nav__link> <span class=md-ellipsis> Narratives </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5 checked> <label class=md-nav__link for=__nav_3_5 id=__nav_3_5_label tabindex=0> <span class=md-ellipsis> Data </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_5_label aria-expanded=true> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../techno/data/ class=md-nav__link> <span class=md-ellipsis> Iceberg & others </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/db-play/ class=md-nav__link> <span class=md-ellipsis> Database play </span> </a> </li> <li class=md-nav__item> <a href=../data-topology/ class=md-nav__link> <span class=md-ellipsis> Data topology </span> </a> </li> <li class=md-nav__item> <a href=../data-integration/ class=md-nav__link> <span class=md-ellipsis> Data integration </span> </a> </li> <li class=md-nav__item> <a href=../data-replication/ class=md-nav__link> <span class=md-ellipsis> Data replication </span> </a> </li> <li class=md-nav__item> <a href=../data-partitioning/ class=md-nav__link> <span class=md-ellipsis> Data partitioning </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/streaming/ class=md-nav__link> <span class=md-ellipsis> Streaming processing </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/opendatahub/ class=md-nav__link> <span class=md-ellipsis> OpenData Hub </span> </a> </li> <li class=md-nav__item> <a href=../olap/ class=md-nav__link> <span class=md-ellipsis> OLAP </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Cassandra </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Cassandra </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#key-value-propositions class=md-nav__link> <span class=md-ellipsis> Key value propositions </span> </a> </li> <li class=md-nav__item> <a href=#concepts class=md-nav__link> <span class=md-ellipsis> Concepts </span> </a> </li> <li class=md-nav__item> <a href=#define-assets-table-structure-with-cql class=md-nav__link> <span class=md-ellipsis> Define Assets Table Structure with CQL </span> </a> <nav class=md-nav aria-label="Define Assets Table Structure with CQL"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#some-useful-cql-commands class=md-nav__link> <span class=md-ellipsis> Some useful CQL commands </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#cassandra-deployment class=md-nav__link> <span class=md-ellipsis> Cassandra deployment </span> </a> <nav class=md-nav aria-label="Cassandra deployment"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#deployment-on-openshift class=md-nav__link> <span class=md-ellipsis> Deployment on OpenShift </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#high-availability class=md-nav__link> <span class=md-ellipsis> High availability </span> </a> </li> <li class=md-nav__item> <a href=#cassandra-client-api class=md-nav__link> <span class=md-ellipsis> Cassandra client API </span> </a> </li> <li class=md-nav__item> <a href=#coding class=md-nav__link> <span class=md-ellipsis> Coding </span> </a> <nav class=md-nav aria-label=Coding> <ul class=md-nav__list> <li class=md-nav__item> <a href=#use-cassandra-java-api-to-create-objects class=md-nav__link> <span class=md-ellipsis> Use Cassandra Java API to create objects </span> </a> </li> <li class=md-nav__item> <a href=#issues class=md-nav__link> <span class=md-ellipsis> Issues </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#future-readings class=md-nav__link> <span class=md-ellipsis> Future Readings </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_6> <label class=md-nav__link for=__nav_3_6 id=__nav_3_6_label tabindex=0> <span class=md-ellipsis> AI </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_6_label aria-expanded=false> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> AI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/ML-studies/#machine-learning class=md-nav__link> <span class=md-ellipsis> Machine learning </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/ML-studies/ml/deep-learning/ class=md-nav__link> <span class=md-ellipsis> Deep learning </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Techno </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Techno </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../techno/apicurio/ class=md-nav__link> <span class=md-ellipsis> Apicurio </span> </a> </li> <li class=md-nav__item> <a href=../../techno/atlas/ class=md-nav__link> <span class=md-ellipsis> Atlas </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/yarfba class=md-nav__link> <span class=md-ellipsis> AWS body of knowledge </span> </a> </li> <li class=md-nav__item> <a href=../../techno/code-engine/ class=md-nav__link> <span class=md-ellipsis> Code Engine </span> </a> </li> <li class=md-nav__item> <a href=../../techno/databricks/ class=md-nav__link> <span class=md-ellipsis> Databricks </span> </a> </li> <li class=md-nav__item> <a href=../../techno/docker/ class=md-nav__link> <span class=md-ellipsis> Docker </span> </a> </li> <li class=md-nav__item> <a href=../../techno/decisions/drools/ class=md-nav__link> <span class=md-ellipsis> Drools </span> </a> </li> <li class=md-nav__item> <a href=../../techno/egeria/ class=md-nav__link> <span class=md-ellipsis> Egeria </span> </a> </li> <li class=md-nav__item> <a href=../../techno/elasticsrch/ class=md-nav__link> <span class=md-ellipsis> Elastic Search </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/flink-studies/ class=md-nav__link> <span class=md-ellipsis> Flink Studies </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_11> <label class=md-nav__link for=__nav_4_11 id=__nav_4_11_label tabindex=0> <span class=md-ellipsis> IBM </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_11_label aria-expanded=false> <label class=md-nav__title for=__nav_4_11> <span class="md-nav__icon md-icon"></span> IBM </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../architecture/ibmcloud/ class=md-nav__link> <span class=md-ellipsis> IBM Cloud </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/satellite/ class=md-nav__link> <span class=md-ellipsis> IBM Cloud Satellite </span> </a> </li> <li class=md-nav__item> <a href=../../techno/cos/ class=md-nav__link> <span class=md-ellipsis> Cloud object storage </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_11_4> <label class=md-nav__link for=__nav_4_11_4 id=__nav_4_11_4_label tabindex=0> <span class=md-ellipsis> Cloud Pak Automation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_11_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_11_4> <span class="md-nav__icon md-icon"></span> Cloud Pak Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../techno/cp4a/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../techno/cp4a/bai/ class=md-nav__link> <span class=md-ellipsis> BAI </span> </a> </li> <li class=md-nav__item> <a href=../../techno/cp4a/odm/ class=md-nav__link> <span class=md-ellipsis> ODM </span> </a> </li> <li class=md-nav__item> <a href=../../techno/cp4a/ads/ class=md-nav__link> <span class=md-ellipsis> Automation Decision Service </span> </a> </li> <li class=md-nav__item> <a href=../../techno/cp4a/process-mining/ class=md-nav__link> <span class=md-ellipsis> Process mining </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_11_5> <label class=md-nav__link for=__nav_4_11_5 id=__nav_4_11_5_label tabindex=0> <span class=md-ellipsis> Cloud Pak integration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_11_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_11_5> <span class="md-nav__icon md-icon"></span> Cloud Pak integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../techno/integration/cp4i/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../techno/integration/apic/ class=md-nav__link> <span class=md-ellipsis> APIC </span> </a> </li> <li class=md-nav__item> <a href=../../techno/integration/eepm/ class=md-nav__link> <span class=md-ellipsis> EEPM </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_11_5_4> <label class=md-nav__link for=__nav_4_11_5_4 id=__nav_4_11_5_4_label tabindex=0> <span class=md-ellipsis> MQ </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_4_11_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_11_5_4> <span class="md-nav__icon md-icon"></span> MQ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../techno/integration/mq/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../java/mqChallenge/ class=md-nav__link> <span class=md-ellipsis> MQ challenge </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/kafka-studies class=md-nav__link> <span class=md-ellipsis> Kafka Studies </span> </a> </li> <li class=md-nav__item> <a href=../../techno/kar/ class=md-nav__link> <span class=md-ellipsis> KAR </span> </a> </li> <li class=md-nav__item> <a href=../../techno/microcks/ class=md-nav__link> <span class=md-ellipsis> Microcks </span> </a> </li> <li class=md-nav__item> <a href=../../techno/minikube/ class=md-nav__link> <span class=md-ellipsis> Minikube </span> </a> </li> <li class=md-nav__item> <a href=../../techno/podman/ class=md-nav__link> <span class=md-ellipsis> Podman </span> </a> </li> <li class=md-nav__item> <a href=../../techno/prometheus/ class=md-nav__link> <span class=md-ellipsis> Prometheus </span> </a> </li> <li class=md-nav__item> <a href=../../techno/rancherdesktop/ class=md-nav__link> <span class=md-ellipsis> Rancher Desktop </span> </a> </li> <li class=md-nav__item> <a href=../../techno/redis/ class=md-nav__link> <span class=md-ellipsis> Redis </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/redpanda-studies/ class=md-nav__link> <span class=md-ellipsis> Red Panda </span> </a> </li> <li class=md-nav__item> <a href=../../techno/scaleway/ class=md-nav__link> <span class=md-ellipsis> Scaleway </span> </a> </li> <li class=md-nav__item> <a href=../../techno/solr/ class=md-nav__link> <span class=md-ellipsis> Solr </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/spark-studies/ class=md-nav__link> <span class=md-ellipsis> Spark Studies </span> </a> </li> <li class=md-nav__item> <a href=../../java/java-vscode/ class=md-nav__link> <span class=md-ellipsis> VScode </span> </a> </li> <li class=md-nav__item> <a href=../../techno/wsl2/ class=md-nav__link> <span class=md-ellipsis> WSL2-Ubuntu </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#key-value-propositions class=md-nav__link> <span class=md-ellipsis> Key value propositions </span> </a> </li> <li class=md-nav__item> <a href=#concepts class=md-nav__link> <span class=md-ellipsis> Concepts </span> </a> </li> <li class=md-nav__item> <a href=#define-assets-table-structure-with-cql class=md-nav__link> <span class=md-ellipsis> Define Assets Table Structure with CQL </span> </a> <nav class=md-nav aria-label="Define Assets Table Structure with CQL"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#some-useful-cql-commands class=md-nav__link> <span class=md-ellipsis> Some useful CQL commands </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#cassandra-deployment class=md-nav__link> <span class=md-ellipsis> Cassandra deployment </span> </a> <nav class=md-nav aria-label="Cassandra deployment"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#deployment-on-openshift class=md-nav__link> <span class=md-ellipsis> Deployment on OpenShift </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#high-availability class=md-nav__link> <span class=md-ellipsis> High availability </span> </a> </li> <li class=md-nav__item> <a href=#cassandra-client-api class=md-nav__link> <span class=md-ellipsis> Cassandra client API </span> </a> </li> <li class=md-nav__item> <a href=#coding class=md-nav__link> <span class=md-ellipsis> Coding </span> </a> <nav class=md-nav aria-label=Coding> <ul class=md-nav__list> <li class=md-nav__item> <a href=#use-cassandra-java-api-to-create-objects class=md-nav__link> <span class=md-ellipsis> Use Cassandra Java API to create objects </span> </a> </li> <li class=md-nav__item> <a href=#issues class=md-nav__link> <span class=md-ellipsis> Issues </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#future-readings class=md-nav__link> <span class=md-ellipsis> Future Readings </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=cassandra-summary>Cassandra Summary<a class=headerlink href=#cassandra-summary title="Permanent link">&para;</a></h1> <p>This article is summary of <a href=http://cassandra.apache.org/ >Apache Cassandra</a> which is a NoSQL, row-oriented, highly scalable and highly available database. It was created by Facebook team and given as an open-source to Apache Foundation.</p> <p>Cassandra addresses linear scalability and high availability to persist a huge <key,value> data set. It uses replication to multiple nodes, managed in cluster, even deployed cross data centers.</p> <p>The Apache Cassandra database is the right choice when you need scalability and high availability without compromising performance. Linear scalability and proven fault-tolerance on commodity hardware or cloud infrastructure make it the perfect platform for mission-critical data.</p> <h2 id=key-value-propositions>Key value propositions<a class=headerlink href=#key-value-propositions title="Permanent link">&para;</a></h2> <ul> <li>Handle <strong>massive datasets</strong> distributed across multiple nodes, allowing for high read and write performance</li> <li><strong>High availability and fault tolerance</strong> even between data centers. It supports always-on availability with zero downtime. It uses a peer-to-peer architecture and automatic replication to ensure that data is never lost.</li> <li><strong>Distributed and Decentralized Architecture</strong>: Cassandra's decentralized architecture eliminates single points of failure and provides fault tolerance.</li> <li><strong>Linear Scalability</strong>: even as more nodes are added to the cluster</li> <li><strong>Flexible Data Model</strong>: Cassandra's data model is based on a wide column store, which allows for flexible schema design. It supports dynamic column addition and removal, making it suitable for applications with evolving data requirements.</li> <li><strong>Fast writes</strong>: Cassandra is optimized for high-speed writes, making it well-suited for applications that need to capture large volumes of data in real-time, such as IoT, sensor data, and logging</li> <li><strong>Query flexibility</strong>: Cassandra supports a variety of query methods, including lightweight transactions, batches, and secondary indexes, to provide flexible data access.</li> </ul> <h2 id=concepts>Concepts<a class=headerlink href=#concepts title="Permanent link">&para;</a></h2> <p>Cassandra uses a <strong>ring based Distributed Hash Table</strong> servers but without finder or routing tables. Keys are stored in DHT to one server and replicated on the 2 next neighbor servers. There is one ring per data center. The coordinator forwards the query to a subset of replicas for a particular key. Every server that could be a coordinator needs to know the 'key to server' assignment. </p> <p>Two data placement strategies:</p> <ul> <li> <p>simple strategy: use two kinds of partitioners:</p> </li> <li> <p>random, which does operation like hashing</p> </li> <li> <p>byte ordered, which assigns range of keys to servers: easier for range queries</p> </li> <li> <p>network topology strategy: used for multiple data centers. It supports different configuration, like 2 replicas of each key per data center.</p> </li> </ul> <p>First replica is placed according to the Partitioner logic: it makes sure to store the other replica to different rack, to avoid a rack failure which may make all key copies not available. Go around the ring clockwise until encountering a server in a different rack.</p> <p><em>Snitches: is a mechanism to map ip addresses to racks in DC. Cassandra supports such configuration.</em></p> <p>Client sends writes to one coordinator node in Cassandra cluster. Every write operation is first stored in the commit log. It is used for crash recovery. Coordinator may be per key or per client or per query. </p> <p>Write operations are always successful, even in case of failure: the coordinator uses the Hinted Handoff mechanism (it assumes ownership of the key until being sure it is supported by the replica), as it writes to other replicas and keeps the write locally until the down replica comes back up. If all the replicas are done, the Coordinator buffers writes for few hours. </p> <p>After data is written to the commit log it then is stored in Mem-Table(Memory Table) which remains there till it reaches to the threshold. </p> <p>Finally, Sorted-String Table or SSTable is a disk file which stores data from MemTable once it reaches to the threshold. SSTables are stored on disk sequentially and maintained for each database table.</p> <p>There are three types of read operations: 1/ <strong>Direct-request</strong> where coordinator send read query to one of the replicas and a digest request to other replicas to ensure returned data are up-to-date. 2/ <strong>Digest-request</strong>: returned rows from each replica are compared in memory for consistency 3/ <strong>Read-repair</strong>: in case of data is not consistent across the node, a background read repair request is initiated that makes sure that the most recent data is available across the nodes.</p> <p>It uses partitioner to send query to all replica nodes responsible for a partition key. The process to write should be fast and not involving lock on resource. It should not involve read and disk seeks.</p> <p>Here are some key concepts of Cassandra to keep in mind:</p> <ul> <li><strong>Cluster</strong>: the set of nodes potentially deployed across data centers, organized as a 'ring'.</li> <li><strong>Keyspace</strong>: like a schema in SQL DB. It is the higher abstraction object to contain data. The important keyspace attributes are the Replication Factor, the Replica Placement Strategy and the Column Families.</li> <li><strong>Column Family</strong>: they are like tables in Relational Databases. Each Column Family contains a collection of rows which are represented by a Map<rowkey, sortedmap\&lt;columnkey, columnvalue>>. The key gives the ability to access related data all together</li> <li><strong>Column</strong> â€“ A column is a data structure which contains a column name, a value and a timestamp. The columns and the number of columns in each row may vary in contrast with a relational database where data are well structured.</li> </ul> <h2 id=define-assets-table-structure-with-cql>Define Assets Table Structure with CQL<a class=headerlink href=#define-assets-table-structure-with-cql title="Permanent link">&para;</a></h2> <p>Cassandra Query Language (CQL) is very similar to SQL but suited for the JOINless structure of Cassandra.</p> <p>Using the csql tool we can create space and table. To use <code>cqlsh</code> connect to cassandra container:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>docker<span class=w> </span><span class=nb>exec</span><span class=w> </span>-ti<span class=w> </span>cassandra_1<span class=w> </span>cqlsh
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=c1># k8s</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>$<span class=w> </span>kubectl<span class=w> </span><span class=nb>exec</span><span class=w> </span>-tin<span class=w> </span>greencompute<span class=w> </span>cassandra_1<span class=w> </span>cqlsh
</code></pre></div> <p>You are now in cqlsh shell and you can define assets table under keyspace <code>assetmonitoring</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>sqlsh&gt;  create keyspace assetmonitoring with replication={&#39;class&#39;:&#39;SimpleStrategy&#39;, &#39;replication_factor&#39;:1};
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>sqlsh&gt; use assetmonitoring;
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>sqlsh:assetmonitoring&gt; create TABLE assets(id text PRIMARY KEY, os text, type text, ipaddress text, version text, antivirus text, current double, rotation int, pressure int, temperature int, latitude double, longitude double);
</code></pre></div> <p>Add an index on the asset operating system field and one on type.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>CREATE INDEX ON assetmonitoring.assets (os);
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>CREATE INDEX ON assetmonitoring.assets (type);
</code></pre></div> <p>If you reconnect to the pod using cqlsh you can assess the table using</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>describe tables
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>describe assets
</code></pre></div> <h3 id=some-useful-cql-commands>Some useful CQL commands<a class=headerlink href=#some-useful-cql-commands title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a># See the table schema
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>cqlsh&gt; describe table assets;
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a># modify a table structure adding a column
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>cqlsh&gt; alter table assets add flowRate bigint;
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a># change column type. example the name column:
<a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a>cqlsh&gt; alter table assets alter name type text;
<a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a>
<a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a># list content of a table  
<a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a>cqlsh&gt; select id,ipaddress,latitude,longitude from assets;
<a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a>
<a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a># delete a table
<a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a>cqlsh&gt; drop table if exists assets;
</code></pre></div> <h2 id=cassandra-deployment>Cassandra deployment<a class=headerlink href=#cassandra-deployment title="Permanent link">&para;</a></h2> <p>Running locally with docker compose on a two nodes topology. <a href=https://github.com/jbcodeforce/jbcodeforce.github.io/tree/code/studies/cassandra/docker-compose.yaml>See docker compose file</a></p> <p>Looking to hosted managed service like <a href=https://aws.amazon.com/keyspaces/ >AWS Keyspaces</a> , <a href=https://www.datastax.com/products/datastax-enterprise>DataStax enterprise</a></p> <h3 id=deployment-on-openshift>Deployment on OpenShift<a class=headerlink href=#deployment-on-openshift title="Permanent link">&para;</a></h3> <p>Cassandra is deployed <a href=https://github.com/k8ssandra/cass-operator>via operator</a>. Through monitoring pod state via Kubernetes callbacks the operator handles day to day operations such as restarting failed processes, scaling clusters up, and deploying configuration changes in a rolling, non-disruptive, fashion.</p> <p>The operator is designed to be Namespace scoped.</p> <p>Deploying stateful distributed applications like Cassandra is not easy. You will leverage the kubernetes cluster to support high availability and deploy c7a to the worker nodes.</p> <p><img alt src=../images/cassandra-k8s.png></p> <p>We also recommend to be familiar with <a href=https://kubernetes.io/docs/tutorials/stateful-application/cassandra/ >this kubernetes tutorial on how to deploy Cassandra with Stateful Sets</a>.</p> <h4 id=performance-considerations>Performance considerations<a class=headerlink href=#performance-considerations title="Permanent link">&para;</a></h4> <p>The resource requirements for higher performance c7a node are:</p> <ul> <li>a minimum of 32GB RAM (JVM + Linux memory buffers to cache SSTable) + <code>memory.available</code> defined in Kubernetes Eviction policy + Resources needed by k8s components that run on every worker node (e.g. proxy)</li> <li>a minimum of 8 processor cores per Cassandra Node with 2 CPUs per core (16 vCPU in a VM)</li> <li>4-8 GB JVM heap, recommend trying to keep heaps limited to 4 GB to minimize garbage collection pauses caused by large heaps.</li> <li>Cassandra needs local storage to get best performance. Avoid to use distributed storage, and prefer hostPath or localstorage. With distributed storage like a Glusterfs cluster you may have 9 replicas (3x Cassandra replica factor which is usually 3)</li> </ul> <p>Cassandra nodes tend to be IO bound rather than CPU bound:</p> <ul> <li>Upper limit of data per node &lt;= 1.5 TB for spinning disk and &lt;= 4 TB for SSD</li> <li>Increase the number of nodes to keep the data per node at or below the recommended capacity</li> <li>Actual data per node determined by data throughput, for high throughput need to limit the data per node.</li> </ul> <p>The use of Vnodes is generally considered to be a good practice as they eliminate the need to perform manual token assignment, distribute workload across all nodes in a cluster when nodes are added or removed. It helps rebuilding dead nodes faster. Vnode reduces the size of SSTables which can improve read performance. Cassandra best practices set the number of tokens per Cassandra node to 256.</p> <p>Avoid getting multiple node instances on the same physical host, so use <code>podAntiAffinity</code> in the StatefulSet spec.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=nt>spec</span><span class=p>:</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>  </span><span class=nt>affinity</span><span class=p>:</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>    </span><span class=nt>podAntiAffinity</span><span class=p>:</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>      </span><span class=nt>requiredDuringSchedulingIgnoredDuringExecution</span><span class=p>:</span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>        </span><span class=nt>topologyKey</span><span class=p>:</span><span class=w> </span><span class=s>&quot;kubernetes.io/hostname&quot;</span>
</code></pre></div> <h4 id=using-yaml-configurations>Using yaml configurations<a class=headerlink href=#using-yaml-configurations title="Permanent link">&para;</a></h4> <p>You can reuse the yaml config files under <code>deployment/cassandra</code> folder to configure a Service to expose Cassandra externally, create static persistence volumes, and use the StatefulSet to deploy Cassandra image.</p> <p>The steps to deploy to K8S are:</p> <ol> <li> <p>Connect to your k8s. You may want to get the admin security token using the Admin console and the script: <code>scripts/connectToCluster.sh</code>. </p> <p><em>We are using one namespace called 'greencompute'.</em></p> <p>You can also use our script <code>deployCassandra.sh</code> under the <code>../scripts</code> folder to automate this deployment.</p> </li> <li> <p>create Cassandra headless service, so application accesses it via KubeDNS. If you do wish to connect an application to cassandra, use the KubeDNS value of <code>cassandra-svc.greencompute.svc.cluster.local</code>, or <code>cassandra-svc</code> or <code>cassandra-0</code>. The alternate solution is to use <em>Ingress</em> rule and set a hostname as cassandra.green.case. The <code>casssandara-ingress.yml</code> file defines such Ingress.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>$<span class=w> </span>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>deployment/cassandra/cassandra-service.yaml<span class=w> </span>--namespace<span class=w> </span>greencompute
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>$<span class=w> </span>kubectl<span class=w> </span>get<span class=w> </span>svc<span class=w> </span>cassandra-svc<span class=w> </span>-n<span class=w> </span>greencompute
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>NAME<span class=w>        </span>TYPE<span class=w>        </span>CLUSTER-IP<span class=w>   </span>EXTERNAL-IP<span class=w>   </span>PORT<span class=o>(</span>S<span class=o>)</span><span class=w>    </span>AGE
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a>cassandra-svc<span class=w>   </span>ClusterIP<span class=w>    </span>None<span class=w>          </span>&lt;none&gt;<span class=w>        </span><span class=m>9042</span>/TCP<span class=w>   </span>12h
</code></pre></div> </li> <li> <p>Create Create static persistence volumes to keep data for cassandra: <em>you need the same number of PV as there are cassandra nodes (here 3 nodes)</em></p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>$<span class=w> </span>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>deployment/cassandra/cassandra-volumes.yaml
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>$<span class=w> </span>kubectl<span class=w> </span>get<span class=w> </span>pv<span class=w> </span>-n<span class=w> </span>greencompute<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>cassandra
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=w>    </span>cassandra-data-1<span class=w>  </span>1Gi<span class=w>  </span>RWO<span class=w>  </span>Recycle<span class=w>   </span>Bound<span class=w>       </span>greencompute/cassandra-data-cassandra-0<span class=w> </span>12h
<a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=w>    </span>cassandra-data-2<span class=w>  </span>1Gi<span class=w>  </span>RWO<span class=w>  </span>Recycle<span class=w>   </span>Available<span class=w>                                           </span>12h
<a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=w>    </span>cassandra-data-3<span class=w>  </span>1Gi<span class=w>  </span>RWO<span class=w>  </span>Recycle<span class=w>   </span>Available<span class=w>   </span>
</code></pre></div> </li> <li> <p>Create the StatefulSet, which defines a cassandra ring of 3 nodes. The <a href=https://hub.docker.com/_/cassandra/ >cassandra image</a> used is coming from dockerhub public repository.</p> <p>if you are using your own namespace name or you change the service name, modify the service name and namespace used in the yaml :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=nt>env</span><span class=p>:</span>
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">CASSANDRA_SEEDS</span>
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=w>    </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cassandra-0.cassandra-svc.greencompute.svc.cluster.local</span>
</code></pre></div> <p>Cassandra seed is used for two purposes:</p> <ul> <li>Node discovery: when a new cassandra node is added (which means when deployed on k8s, a new pod instance added by increasing the replica), it needs to find the cluster, so here it is set the svc</li> <li>assist on gossip convergence: by having all of the nodes in the cluster gossip regularly with the same set of seeds. It ensures changes are propagated regularly.</li> </ul> <p>Here it needs to reference the headless service we defined for Cassandra deployment.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>$ kubectl apply -f deployment/cassandra/cassandra-statefulset.yaml  -n greencompute
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>$ kubectl get statefulset -n greencompute
<a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>
<a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a>NAME                                        DESIRED   CURRENT   AGE
<a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>cassandra                                   1         1         12h
</code></pre></div> </li> <li> <p>Connect to the pod to assess the configuration is as expected. </p> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>$<span class=w> </span>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-o<span class=w> </span>wide<span class=w> </span>-n<span class=w> </span>greencompute
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>NAME<span class=w>          </span>READY<span class=w>     </span>STATUS<span class=w>    </span>RESTARTS<span class=w>   </span>AGE<span class=w>       </span>IP<span class=w>              </span>NODE
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>cassandra-0<span class=w>   </span><span class=m>0</span>/1<span class=w>       </span>Running<span class=w>   </span><span class=m>0</span><span class=w>          </span>2m<span class=w>        </span><span class=m>192</span>.168.35.93<span class=w>   </span><span class=m>169</span>.61.151.164
<a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a>
<a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a>$<span class=w> </span>kubectl<span class=w> </span><span class=nb>exec</span><span class=w> </span>-tin<span class=w> </span>greencompute<span class=w> </span>cassandra-0<span class=w> </span>--<span class=w> </span>nodetool<span class=w> </span>status
<a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a>
<a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a>Datacenter:<span class=w> </span><span class=nv>DC1</span>
<a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=o>===============</span>
<a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a><span class=nv>Status</span><span class=o>=</span>Up/Down
<a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a><span class=p>|</span>/<span class=w> </span><span class=nv>State</span><span class=o>=</span>Normal/Leaving/Joining/Moving
<a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a>--<span class=w>  </span>Address<span class=w>          </span>Load<span class=w>       </span>Tokens<span class=w>        </span>Owns<span class=w> </span><span class=o>(</span>effective<span class=o>)</span><span class=w>  </span>Host<span class=w> </span>ID<span class=w>                               </span>Rack
<a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a>UN<span class=w>  </span><span class=m>192</span>.168.212.174<span class=w>  </span><span class=m>257</span>.29<span class=w> </span>KiB<span class=w>  </span><span class=m>256</span><span class=w>          </span><span class=m>100</span>.0%<span class=w>            </span>ea8acc49-1336-4941-b122-a4ef711ca0e6<span class=w>  </span>Rack1
</code></pre></div> </li> </ol> <p>The string UN, is for Up and Normal state.</p> <h4 id=removing-cassandra-cluster>Removing cassandra cluster<a class=headerlink href=#removing-cassandra-cluster title="Permanent link">&para;</a></h4> <p>We are providing a script for that <code>./scripts/deleteCassandra.sh</code> which remove the stateful, the pv, pvc and service</p> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>grace=$(kubectl get po cassandra-0 -o=jsonpath=&#39;{.spec.terminationGracePeriodSeconds}&#39;) \
<a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>    &amp;&amp; kubectl delete statefulset -l app=cassandra -n greencompute \
<a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a>    &amp;&amp; echo &quot;Sleeping $grace&quot; \
<a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a>    &amp;&amp; sleep $grace \
<a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a>    &amp;&amp; kubectl delete pvc,pv,svc -l app=cassandra
</code></pre></div> <h2 id=high-availability>High availability<a class=headerlink href=#high-availability title="Permanent link">&para;</a></h2> <p>Within a cluster the number of replicas in the statefulset is at least 3 but can be increased to 5 when code maintenance is needed. The choice for persistence storage is important, and the backup and restore strategy of the storage area network used.</p> <p>When creating connection to persist data into a keyspace, you specify the persistence strategy and number of replicas at the client code level. Mostly using properties file.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a>p.setProperty(CASSANDRA_STRATEGY, &quot;SimpleStrategy&quot;);
<a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>p.setProperty(CASSANDRA_REPLICAS, &quot;1&quot;);
</code></pre></div> <p>When deploying on Staging or test cluster, ring topology, SimpleStrategy is enough: additional replicas are placed on the next nodes in the ring moving clockwise without considering topology, such as rack or datacenter location. For HA and production deployment NetworkTopologyStrategy is needed: replicas are placed in the same datacenter but on distinct racks.</p> <p>For the number of replicas, it is recommended to use 3 per datacenter.</p> <p>The <code>spec.env</code> parameters in the statefulset defines the datacenter name and rack name too.</p> <h2 id=cassandra-client-api>Cassandra client API<a class=headerlink href=#cassandra-client-api title="Permanent link">&para;</a></h2> <p>In the pom.xml we added the following dependencies to get access to the core driver API:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=nt>&lt;dependency&gt;</span>
<a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=w>  </span><span class=nt>&lt;groupId&gt;</span>com.datastax.cassandra<span class=nt>&lt;/groupId&gt;</span>
<a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=w>  </span><span class=nt>&lt;artifactId&gt;</span>cassandra-driver-core<span class=nt>&lt;/artifactId&gt;</span>
<a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=w>  </span><span class=nt>&lt;version&gt;</span>3.1.4<span class=nt>&lt;/version&gt;</span>
<a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=nt>&lt;/dependency&gt;</span>
</code></pre></div> <p>The DAO code is <code>CassandraRepo.java</code> and it basically connects to the Cassandra cluster when the DAO class is created...</p> <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>Builder b = Cluster.builder().addContactPoints(endpoints);
<a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a>cluster = b.build();
<a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a>session = cluster.connect();
</code></pre></div> <p>The trick is in the endpoints name. We externalize this setting in a configuration properties and use the cassandra-svc name when deploy in ICP.</p> <p>It is possible also to create keyspace and tables by API if they do not exist by building CQL query string and use the session.execute(aquery) method. See <a href=#use-cassandra-java-api-to-create-objects>this section below</a></p> <h2 id=coding>Coding<a class=headerlink href=#coding title="Permanent link">&para;</a></h2> <h3 id=use-cassandra-java-api-to-create-objects>Use Cassandra Java API to create objects<a class=headerlink href=#use-cassandra-java-api-to-create-objects title="Permanent link">&para;</a></h3> <ul> <li>Create keyspace:</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=n>StringBuilder</span><span class=w> </span><span class=n>sb</span><span class=w> </span><span class=o>=</span>
<a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=w>    </span><span class=k>new</span><span class=w> </span><span class=n>StringBuilder</span><span class=p>(</span><span class=s>&quot;CREATE KEYSPACE IF NOT EXISTS &quot;</span><span class=p>)</span>
<a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=w>      </span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=n>keyspaceName</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=s>&quot; WITH replication = {&quot;</span><span class=p>)</span>
<a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=w>      </span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=s>&quot;&#39;class&#39;:&#39;&quot;</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=n>replicationStrategy</span><span class=p>)</span>
<a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=w>      </span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=s>&quot;&#39;,&#39;replication_factor&#39;:&quot;</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=n>replicationFactor</span><span class=p>)</span>
<a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=w>      </span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=s>&quot;};&quot;</span><span class=p>);</span>
<a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a>
<a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a><span class=w>    </span><span class=n>String</span><span class=w> </span><span class=n>query</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sb</span><span class=p>.</span><span class=na>toString</span><span class=p>();</span>
<a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a><span class=w>    </span><span class=n>session</span><span class=p>.</span><span class=na>execute</span><span class=p>(</span><span class=n>query</span><span class=p>);</span>
</code></pre></div> <ul> <li>Create table</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=n>StringBuilder</span><span class=w> </span><span class=n>sb</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>StringBuilder</span><span class=p>(</span><span class=s>&quot;CREATE TABLE IF NOT EXISTS &quot;</span><span class=p>)</span>
<a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=w>         </span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=n>TABLE_NAME</span><span class=p>).</span><span class=na>append</span><span class=p>(</span><span class=s>&quot;(&quot;</span><span class=p>)</span>
<a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=w>         </span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=s>&quot;id uuid PRIMARY KEY, &quot;</span><span class=p>)</span>
<a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=w>         </span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=s>&quot;temperature text,&quot;</span><span class=p>)</span>
<a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=w>         </span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=s>&quot;latitude text,&quot;</span><span class=p>)</span>
<a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=w>         </span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=s>&quot;longitude text);&quot;</span><span class=p>);</span>
<a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a>
<a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=w>       </span><span class=n>String</span><span class=w> </span><span class=n>query</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>sb</span><span class=p>.</span><span class=na>toString</span><span class=p>();</span>
<a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a><span class=w>       </span><span class=n>session</span><span class=p>.</span><span class=na>execute</span><span class=p>(</span><span class=n>query</span><span class=p>);</span>
</code></pre></div> <ul> <li>insert data: there is no update so if you want a strict insert you need to add "IF NOT EXISTS" condition in the query.</li> </ul> <h3 id=issues>Issues<a class=headerlink href=#issues title="Permanent link">&para;</a></h3> <ol> <li>When having the cassandra replica set to more than two, the cassandra operations are not happenning parallely on both the pods at a time. Some operations are happenning on one node and some others on the other node. Due to this, inconsistent data is retrieved since both the tables doesnot have the same data.</li> </ol> <h2 id=future-readings>Future Readings<a class=headerlink href=#future-readings title="Permanent link">&para;</a></h2> <ul> <li><a href=https://cassandra.apache.org/_/quickstart.html>Getting Started documentation</a></li> <li><a href=https://towardsdatascience.com/getting-started-with-apache-cassandra-and-python-81e00ccf17c9>Getting started article on Cassandra and Python</a></li> <li><a href=https://www.ibm.com/developerworks/library/ba-multi-data-center-cassandra-cluster-kubernetes-platform/index.html>10 steps to set up a multi-data center Cassandra cluster on a Kubernetes platform</a></li> <li><a href=https://github.com/IBM/Scalable-Cassandra-deployment-on-Kubernetes>IBM Article: Scalable multi-node Cassandra deployment on Kubernetes Cluster</a></li> <li><a href=https://blog.deimos.fr/2018/06/24/running-cassandra-on-kubernetes/ >Running Cassandra on Kubernetes</a></li> </ul> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../olap/ class="md-footer__link md-footer__link--prev" aria-label="Previous: OLAP"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> OLAP </div> </div> </a> <a href=../../techno/apicurio/ class="md-footer__link md-footer__link--next" aria-label="Next: Apicurio"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Apicurio </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2018 - 2024 Jerome Boyer </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/jbcodeforce target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://linkedin.com/in/jeromeboyer target=_blank rel=noopener title=linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> <a href target=_blank rel=noopener title class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480v-83.6c0-4 1.5-7.8 4.2-10.8l167.6-182.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8l-88.3-44.2C7.1 311.3.3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.annotate", "content.code.copy", "content.tooltips", "search.highlight", "navigation.instant", "navigation.instant.progress", "navigation.tabs", "navigation.instant", "navigation.tabs.sticky", "navigation.tracking", "navigation.footer", "navigation.tabs.sticky", "navigation.top"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.525ec568.min.js></script> </body> </html>