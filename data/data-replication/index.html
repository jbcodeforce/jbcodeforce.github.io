<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Knowledge acquisition personal's notes, blog drafts"><link href=https://jeromeboyer.net/data/data-replication/ rel=canonical><link href=../data-integration/ rel=prev><link href=../data-partitioning/ rel=next><link rel=icon href=../../images/logo-blue.drawio.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.5.39"><title>Data replication - Jerome Boyer's Personal Site</title><link rel=stylesheet href=../../assets/stylesheets/main.8c3ca2c6.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#data-replication class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Jerome Boyer's Personal Site" class="md-header__button md-logo" aria-label="Jerome Boyer's Personal Site" data-md-component=logo> <img src=../../images/logo.drawio.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Jerome Boyer's Personal Site </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Data replication </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/jbcodeforce/jbcodeforce.github.io/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../about/ class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../coding/playground/ class=md-tabs__link> Coding </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../blogs/consultant-job/ class=md-tabs__link> Knowledge base </a> </li> <li class=md-tabs__item> <a href=../../techno/apicurio/ class=md-tabs__link> Techno </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Jerome Boyer's Personal Site" class="md-nav__button md-logo" aria-label="Jerome Boyer's Personal Site" data-md-component=logo> <img src=../../images/logo.drawio.png alt=logo> </a> Jerome Boyer's Personal Site </label> <div class=md-nav__source> <a href=https://github.com/jbcodeforce/jbcodeforce.github.io/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1 id=__nav_1_label tabindex=0> <span class=md-ellipsis> Home </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../about/ class=md-nav__link> <span class=md-ellipsis> About </span> </a> </li> <li class=md-nav__item> <a href=../../skills/ class=md-nav__link> <span class=md-ellipsis> Skills </span> </a> </li> <li class=md-nav__item> <a href=../../blogs/ class=md-nav__link> <span class=md-ellipsis> Blogs </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_4> <label class=md-nav__link for=__nav_1_4 id=__nav_1_4_label tabindex=0> <span class=md-ellipsis> Leasure </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_4_label aria-expanded=false> <label class=md-nav__title for=__nav_1_4> <span class="md-nav__icon md-icon"></span> Leasure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../astronomy/ class=md-nav__link> <span class=md-ellipsis> Astronomy </span> </a> </li> <li class=md-nav__item> <a href=../../astronomy/physic/ class=md-nav__link> <span class=md-ellipsis> Physic - Newton </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Coding </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Coding </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../coding/playground/ class=md-nav__link> <span class=md-ellipsis> Playground </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class=md-ellipsis> Dev & Ops </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Dev & Ops </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../coding/agile/ class=md-nav__link> <span class=md-ellipsis> Agile </span> </a> </li> <li class=md-nav__item> <a href=../../coding/git/ class=md-nav__link> <span class=md-ellipsis> Git summary </span> </a> </li> <li class=md-nav__item> <a href=../../coding/gitops/ class=md-nav__link> <span class=md-ellipsis> GitOps </span> </a> </li> <li class=md-nav__item> <a href=../../coding/tekton/ class=md-nav__link> <span class=md-ellipsis> Tekton </span> </a> </li> <li class=md-nav__item> <a href=../../coding/argocd/ class=md-nav__link> <span class=md-ellipsis> ArgoCD </span> </a> </li> <li class=md-nav__item> <a href=../../coding/finch/ class=md-nav__link> <span class=md-ellipsis> Finch </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> Fun problems </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Fun problems </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../fun/puzzles/ class=md-nav__link> <span class=md-ellipsis> puzzles </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4 id=__nav_2_4_label tabindex=0> <span class=md-ellipsis> Java </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Java </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../java/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../java/FAQ/ class=md-nav__link> <span class=md-ellipsis> Java FAQ </span> </a> </li> <li class=md-nav__item> <a href=../../java/concurrent/ class=md-nav__link> <span class=md-ellipsis> Concurrency </span> </a> </li> <li class=md-nav__item> <a href=../../java/funqy/ class=md-nav__link> <span class=md-ellipsis> Funqy </span> </a> </li> <li class=md-nav__item> <a href=../../java/microprofile/ class=md-nav__link> <span class=md-ellipsis> Microprofile 3.x </span> </a> </li> <li class=md-nav__item> <a href=../../java/openliberty/ class=md-nav__link> <span class=md-ellipsis> Open Liberty </span> </a> </li> <li class=md-nav__item> <a href=../../java/quarkus/ class=md-nav__link> <span class=md-ellipsis> Quarkus </span> </a> </li> <li class=md-nav__item> <a href=../../java/restassured/ class=md-nav__link> <span class=md-ellipsis> Rest assured </span> </a> </li> <li class=md-nav__item> <a href=../../java/springcloud/ class=md-nav__link> <span class=md-ellipsis> SpringCloud </span> </a> </li> <li class=md-nav__item> <a href=../../coding/testcontainer/ class=md-nav__link> <span class=md-ellipsis> TestContainer </span> </a> </li> <li class=md-nav__item> <a href=../../java/vertx/ class=md-nav__link> <span class=md-ellipsis> Vert.x </span> </a> </li> <li class=md-nav__item> <a href=../../java/java-vscode/ class=md-nav__link> <span class=md-ellipsis> VScode </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../techno/podman/ class=md-nav__link> <span class=md-ellipsis> Podman </span> </a> </li> <li class=md-nav__item> <a href=../../coding/reactjs/ class=md-nav__link> <span class=md-ellipsis> React.js & next.js </span> </a> </li> <li class=md-nav__item> <a href=../../coding/istio/ class=md-nav__link> <span class=md-ellipsis> istio </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/python-code class=md-nav__link> <span class=md-ellipsis> Python </span> </a> </li> <li class=md-nav__item> <a href=../../coding/knative/ class=md-nav__link> <span class=md-ellipsis> Knative </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/vuejs-studies/ class=md-nav__link> <span class=md-ellipsis> Vue.js Studies </span> </a> </li> <li class=md-nav__item> <a href=https://cloudnative101.dev/ class=md-nav__link> <span class=md-ellipsis> Cloud native content IBM </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/angular-sandbox/ class=md-nav__link> <span class=md-ellipsis> Angular </span> </a> </li> <li class=md-nav__item> <a href=../../code-template/ class=md-nav__link> <span class=md-ellipsis> My code templates </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Knowledge base </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Knowledge base </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../blogs/consultant-job/ class=md-nav__link> <span class=md-ellipsis> The SA job </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> <span class=md-ellipsis> Leadership </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Leadership </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../leadership/first-90-days/ class=md-nav__link> <span class=md-ellipsis> 90 Days </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class=md-ellipsis> Architecture </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../architecture/system-design/ class=md-nav__link> <span class=md-ellipsis> Conduct System Design </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/eda-studies class=md-nav__link> <span class=md-ellipsis> Event Driven Architecture </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/tcpip/ class=md-nav__link> <span class=md-ellipsis> TPC/IP summary </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/flow-architectures/ class=md-nav__link> <span class=md-ellipsis> Flow architectures </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/streaming/ class=md-nav__link> <span class=md-ellipsis> Streaming processing </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/architectural-decisions/ class=md-nav__link> <span class=md-ellipsis> Architecture decision </span> </a> </li> <li class=md-nav__item> <a href="https://jbcodef orce.github.io/eda-studies/ddd" class=md-nav__link> <span class=md-ellipsis> DDD </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/DR/ class=md-nav__link> <span class=md-ellipsis> Disaster recovery </span> </a> </li> <li class=md-nav__item> <a href=../../coding/istio/ class=md-nav__link> <span class=md-ellipsis> istio </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/openshift-studies class=md-nav__link> <span class=md-ellipsis> Openshift Studies </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class=md-ellipsis> Methodology </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Methodology </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../methodology/design-thinking/ class=md-nav__link> <span class=md-ellipsis> Design Thinking </span> </a> </li> <li class=md-nav__item> <a href=../../methodology/data-intensive/ class=md-nav__link> <span class=md-ellipsis> Data intensive </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/eda-studies/event-storming/ class=md-nav__link> <span class=md-ellipsis> Event Storming </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/eda-studies/ddd/ class=md-nav__link> <span class=md-ellipsis> Domain driven design </span> </a> </li> <li class=md-nav__item> <a href=../../methodology/lean-startup/ class=md-nav__link> <span class=md-ellipsis> Lean startup </span> </a> </li> <li class=md-nav__item> <a href=../../methodology/pm/ class=md-nav__link> <span class=md-ellipsis> Product manager </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_7> <label class=md-nav__link for=__nav_3_4_7 id=__nav_3_4_7_label tabindex=0> <span class=md-ellipsis> ABRD </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_4_7_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4_7> <span class="md-nav__icon md-icon"></span> ABRD </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../methodology/abrd/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../methodology/abrd/concept/ class=md-nav__link> <span class=md-ellipsis> Concepts </span> </a> </li> <li class=md-nav__item> <a href=../../methodology/abrd/harvesting/ class=md-nav__link> <span class=md-ellipsis> Rule Harvesting </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../methodology/narrative/ class=md-nav__link> <span class=md-ellipsis> Narratives </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5 checked> <label class=md-nav__link for=__nav_3_5 id=__nav_3_5_label tabindex=0> <span class=md-ellipsis> Data </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_5_label aria-expanded=true> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../techno/data/ class=md-nav__link> <span class=md-ellipsis> Iceberg & others </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/db-play/ class=md-nav__link> <span class=md-ellipsis> Database play </span> </a> </li> <li class=md-nav__item> <a href=../data-topology/ class=md-nav__link> <span class=md-ellipsis> Data topology </span> </a> </li> <li class=md-nav__item> <a href=../data-integration/ class=md-nav__link> <span class=md-ellipsis> Data integration </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Data replication </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Data replication </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#concepts class=md-nav__link> <span class=md-ellipsis> Concepts </span> </a> <nav class=md-nav aria-label=Concepts> <ul class=md-nav__list> <li class=md-nav__item> <a href=#single-leader class=md-nav__link> <span class=md-ellipsis> Single leader </span> </a> </li> <li class=md-nav__item> <a href=#multi-leaders class=md-nav__link> <span class=md-ellipsis> Multi leaders </span> </a> </li> <li class=md-nav__item> <a href=#leaderless class=md-nav__link> <span class=md-ellipsis> Leaderless </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#considerations class=md-nav__link> <span class=md-ellipsis> Considerations </span> </a> <nav class=md-nav aria-label=Considerations> <ul class=md-nav__list> <li class=md-nav__item> <a href=#business-motivations class=md-nav__link> <span class=md-ellipsis> Business motivations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#technology-overview class=md-nav__link> <span class=md-ellipsis> Technology overview </span> </a> <nav class=md-nav aria-label="Technology overview"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#data-lake-technologies class=md-nav__link> <span class=md-ellipsis> Data lake technologies </span> </a> </li> <li class=md-nav__item> <a href=#change-data-capture-cdc class=md-nav__link> <span class=md-ellipsis> Change data capture (CDC) </span> </a> </li> <li class=md-nav__item> <a href=#why-adopting-kafka-for-data-replication class=md-nav__link> <span class=md-ellipsis> Why adopting Kafka for data replication </span> </a> </li> <li class=md-nav__item> <a href=#kafka-connect class=md-nav__link> <span class=md-ellipsis> Kafka connect </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#recommended-readings class=md-nav__link> <span class=md-ellipsis> Recommended Readings </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../data-partitioning/ class=md-nav__link> <span class=md-ellipsis> Data partitioning </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/streaming/ class=md-nav__link> <span class=md-ellipsis> Streaming processing </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/opendatahub/ class=md-nav__link> <span class=md-ellipsis> OpenData Hub </span> </a> </li> <li class=md-nav__item> <a href=../olap/ class=md-nav__link> <span class=md-ellipsis> OLAP </span> </a> </li> <li class=md-nav__item> <a href=../cassandra/ class=md-nav__link> <span class=md-ellipsis> Cassandra </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_6> <label class=md-nav__link for=__nav_3_6 id=__nav_3_6_label tabindex=0> <span class=md-ellipsis> AI </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_6_label aria-expanded=false> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> AI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/ML-studies/#machine-learning class=md-nav__link> <span class=md-ellipsis> Machine learning </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/ML-studies/ml/deep-learning/ class=md-nav__link> <span class=md-ellipsis> Deep learning </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Techno </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Techno </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../techno/apicurio/ class=md-nav__link> <span class=md-ellipsis> Apicurio </span> </a> </li> <li class=md-nav__item> <a href=../../techno/atlas/ class=md-nav__link> <span class=md-ellipsis> Atlas </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/yarfba class=md-nav__link> <span class=md-ellipsis> AWS body of knowledge </span> </a> </li> <li class=md-nav__item> <a href=../../techno/code-engine/ class=md-nav__link> <span class=md-ellipsis> Code Engine </span> </a> </li> <li class=md-nav__item> <a href=../../techno/databricks/ class=md-nav__link> <span class=md-ellipsis> Databricks </span> </a> </li> <li class=md-nav__item> <a href=../../techno/docker/ class=md-nav__link> <span class=md-ellipsis> Docker </span> </a> </li> <li class=md-nav__item> <a href=../../techno/decisions/drools/ class=md-nav__link> <span class=md-ellipsis> Drools </span> </a> </li> <li class=md-nav__item> <a href=../../techno/egeria/ class=md-nav__link> <span class=md-ellipsis> Egeria </span> </a> </li> <li class=md-nav__item> <a href=../../techno/elasticsrch/ class=md-nav__link> <span class=md-ellipsis> Elastic Search </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/flink-studies/ class=md-nav__link> <span class=md-ellipsis> Flink Studies </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_11> <label class=md-nav__link for=__nav_4_11 id=__nav_4_11_label tabindex=0> <span class=md-ellipsis> IBM </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_11_label aria-expanded=false> <label class=md-nav__title for=__nav_4_11> <span class="md-nav__icon md-icon"></span> IBM </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../architecture/ibmcloud/ class=md-nav__link> <span class=md-ellipsis> IBM Cloud </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/satellite/ class=md-nav__link> <span class=md-ellipsis> IBM Cloud Satellite </span> </a> </li> <li class=md-nav__item> <a href=../../techno/cos/ class=md-nav__link> <span class=md-ellipsis> Cloud object storage </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_11_4> <label class=md-nav__link for=__nav_4_11_4 id=__nav_4_11_4_label tabindex=0> <span class=md-ellipsis> Cloud Pak Automation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_11_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_11_4> <span class="md-nav__icon md-icon"></span> Cloud Pak Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../techno/cp4a/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../techno/cp4a/bai/ class=md-nav__link> <span class=md-ellipsis> BAI </span> </a> </li> <li class=md-nav__item> <a href=../../techno/cp4a/odm/ class=md-nav__link> <span class=md-ellipsis> ODM </span> </a> </li> <li class=md-nav__item> <a href=../../techno/cp4a/ads/ class=md-nav__link> <span class=md-ellipsis> Automation Decision Service </span> </a> </li> <li class=md-nav__item> <a href=../../techno/cp4a/process-mining/ class=md-nav__link> <span class=md-ellipsis> Process mining </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_11_5> <label class=md-nav__link for=__nav_4_11_5 id=__nav_4_11_5_label tabindex=0> <span class=md-ellipsis> Cloud Pak integration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_11_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_11_5> <span class="md-nav__icon md-icon"></span> Cloud Pak integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../techno/integration/cp4i/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../techno/integration/apic/ class=md-nav__link> <span class=md-ellipsis> APIC </span> </a> </li> <li class=md-nav__item> <a href=../../techno/integration/eepm/ class=md-nav__link> <span class=md-ellipsis> EEPM </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_11_5_4> <label class=md-nav__link for=__nav_4_11_5_4 id=__nav_4_11_5_4_label tabindex=0> <span class=md-ellipsis> MQ </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_4_11_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_11_5_4> <span class="md-nav__icon md-icon"></span> MQ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../techno/integration/mq/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../java/mqChallenge/ class=md-nav__link> <span class=md-ellipsis> MQ challenge </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/kafka-studies class=md-nav__link> <span class=md-ellipsis> Kafka Studies </span> </a> </li> <li class=md-nav__item> <a href=../../techno/kar/ class=md-nav__link> <span class=md-ellipsis> KAR </span> </a> </li> <li class=md-nav__item> <a href=../../techno/microcks/ class=md-nav__link> <span class=md-ellipsis> Microcks </span> </a> </li> <li class=md-nav__item> <a href=../../techno/minikube/ class=md-nav__link> <span class=md-ellipsis> Minikube </span> </a> </li> <li class=md-nav__item> <a href=../../techno/podman/ class=md-nav__link> <span class=md-ellipsis> Podman </span> </a> </li> <li class=md-nav__item> <a href=../../techno/prometheus/ class=md-nav__link> <span class=md-ellipsis> Prometheus </span> </a> </li> <li class=md-nav__item> <a href=../../techno/rancherdesktop/ class=md-nav__link> <span class=md-ellipsis> Rancher Desktop </span> </a> </li> <li class=md-nav__item> <a href=../../techno/redis/ class=md-nav__link> <span class=md-ellipsis> Redis </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/redpanda-studies/ class=md-nav__link> <span class=md-ellipsis> Red Panda </span> </a> </li> <li class=md-nav__item> <a href=../../techno/scaleway/ class=md-nav__link> <span class=md-ellipsis> Scaleway </span> </a> </li> <li class=md-nav__item> <a href=../../techno/solr/ class=md-nav__link> <span class=md-ellipsis> Solr </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/spark-studies/ class=md-nav__link> <span class=md-ellipsis> Spark Studies </span> </a> </li> <li class=md-nav__item> <a href=../../java/java-vscode/ class=md-nav__link> <span class=md-ellipsis> VScode </span> </a> </li> <li class=md-nav__item> <a href=../../techno/wsl2/ class=md-nav__link> <span class=md-ellipsis> WSL2-Ubuntu </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#concepts class=md-nav__link> <span class=md-ellipsis> Concepts </span> </a> <nav class=md-nav aria-label=Concepts> <ul class=md-nav__list> <li class=md-nav__item> <a href=#single-leader class=md-nav__link> <span class=md-ellipsis> Single leader </span> </a> </li> <li class=md-nav__item> <a href=#multi-leaders class=md-nav__link> <span class=md-ellipsis> Multi leaders </span> </a> </li> <li class=md-nav__item> <a href=#leaderless class=md-nav__link> <span class=md-ellipsis> Leaderless </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#considerations class=md-nav__link> <span class=md-ellipsis> Considerations </span> </a> <nav class=md-nav aria-label=Considerations> <ul class=md-nav__list> <li class=md-nav__item> <a href=#business-motivations class=md-nav__link> <span class=md-ellipsis> Business motivations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#technology-overview class=md-nav__link> <span class=md-ellipsis> Technology overview </span> </a> <nav class=md-nav aria-label="Technology overview"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#data-lake-technologies class=md-nav__link> <span class=md-ellipsis> Data lake technologies </span> </a> </li> <li class=md-nav__item> <a href=#change-data-capture-cdc class=md-nav__link> <span class=md-ellipsis> Change data capture (CDC) </span> </a> </li> <li class=md-nav__item> <a href=#why-adopting-kafka-for-data-replication class=md-nav__link> <span class=md-ellipsis> Why adopting Kafka for data replication </span> </a> </li> <li class=md-nav__item> <a href=#kafka-connect class=md-nav__link> <span class=md-ellipsis> Kafka connect </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#recommended-readings class=md-nav__link> <span class=md-ellipsis> Recommended Readings </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=data-replication>Data replication<a class=headerlink href=#data-replication title="Permanent link">&para;</a></h1> <div class="admonition abstract"> <p class=admonition-title>Abstract</p> <p>In this article, we are dealing with data replication from traditional Database, like DB2, to a microservice environment with document oriented or relational data. Database replications can be used to move data between environments or to separate read and write models, which may be a viable solution with microservices, but we need to assess how to support coexistence where older systems run in parallel to microservices and use eventual data consistency pattern. </p> </div> <p>We recommend reading the <a href=https://www.ibm.com/cloud/garage/practices/manage/ensure-data-resilience/ >'Ensure data resilience' article from Neal Fishman</a> to understand the problems related to data resilience and how they fit into <a href=../data-topology/ >data topology</a> and governance broader discussions.</p> <h2 id=concepts>Concepts<a class=headerlink href=#concepts title="Permanent link">&para;</a></h2> <p>Data Replication is the process of storing data on more than one storage location on same or different data centers. It fits well, when dataset is small enough to be persisted in one machine, and when data do not change over time. Data replication encompasses duplication of transactions on an ongoing basis, so that the replicates are in a consistently updated state and synchronized with the source.</p> <p>The database centric replication mechanism involves different techniques to apply data replication between databases of the same product (DB2 to DB2, Postgresql to Postgresql). The approach is to control availability and consistency.</p> <p>Replication implementations are most of the time, black box for the business application developers, but we want to present three types of replication architecture:</p> <ul> <li> <p><strong>single-leader</strong>: one of the replica is the leader, and receive write operations from client services. Other replicas are followers, listening to data updates from a replication log and modify their own data store. Read operations can happen on any node, and followers are specifically read-only. This is a pattern used by Kafka, Postgresql, RabbitMQ...</p> <p><img alt=Leader-Followers src=../images/leader-followers.png></p> </li> <li> <p><strong>multi-leader</strong>: multiple nodes accept write operations (they are leaders), and act as follower for other leaders. </p> </li> <li><strong>leaderless</strong>: each node accept write operations. Client sends write to multiple replicas, accept p acknowledges (p &lt;= number of nodes), but also performs n reads to assess eventual stale data. (This type is used in <a href=../cassandra/ >Cassandra</a> or DynamoDB)</li> </ul> <h3 id=single-leader>Single leader<a class=headerlink href=#single-leader title="Permanent link">&para;</a></h3> <p>All write requests are done on the leader, but reads can happen on followers as well. It helps to scale out the solution and also to support long distance replications. Replication can be done synchronously or asynchronously. With synchronous the leader waits until at least one follower has confirmed replication before reporting to the client that the write operation is successful. From the client point of view, it is a synchronous call.</p> <p><img alt=Synch-Asynch src=../images/synch-asynch.png></p> <p>With asynchronous the leader does not wait for followers to replicate. With synchronous, we are sure the data are not lost as at least one follower responded, but if the follower node has failure then the write operation is not consider completed, even if leader has the data. The client can do a retry. But the leader may need to block other write requests until it sees a follower alive. With synch, the data is also consistent with the leader. The figure above illustrates a synchronous mechanism for client - leader and first follower to respond, and asynchronous for the other followers.</p> <p>It is important to note that asynch replica may be the only possible solution when the number of followers is important or when they are separated by long distance with high latency networking communication. Because a full synchronous mechanism will block the write operations in case of a follower failure and will not be reliable.</p> <p>With asynch, two reads at the same time on the leader and one of the follower will not get the same results. This inconsistency is temporal: when there is no more write then the followers will become eventually consistent. This elapse time is called <strong>replication lag</strong>.</p> <p><img alt src=../images/asynch.png></p> <p>This lag can have some interesting derived issues, like seeing data in one query (done on a follower with small lag) and then not seeing the data from the same query done on a bigger lagged follower. To avoid that, the pratice is to use a monolitic read: user makes several reads in sequence, they will not see time go backward. Which can be achieved by ensuring the reads for a given user are done on the same follower. This is what kafka does by assigning a consumer to partition.</p> <p>With asynch replica, if the leader fails, data not yet replicated to the followers, is lost (write operation 2 and 3 in figure below). When a new leader is elected, write operation succeed. </p> <p><img alt src=../images/data-lost.png></p> <p>Also <strong>adding a new follower</strong> brings other challenges: as the data are continuously being written to the leader database, copying the database files to the new follower will not be consistent. One adopted solution is to snapshot the database, without locking write operations, and copy the data to the follower. Then from this snapshot, consumes the update log. The snapshot position needs to be known in the replication log. </p> <p><img alt src=../images/add-follower.png></p> <p>To support follower failure, the log needs to keep position of the last commited read, so when the follower restarts, it can load data from this position in the log. </p> <p>When the leader fails, a follower needs to take the leadership, and then other followers need to get data from the new leader. Kafka, combined with zookeeper, uses those last two mechanisms to support replication. Selecting the new leader is based on consensus algorithm, to ensure minimum data lost. </p> <p>When using single leader, it is possible to reach a split brain state, when the old leader comes back to live, and thinks it is still a leader: both leaders accept writes which leads to data corruption. </p> <p>Most RDBMS uses the master-slave pattern combined with asynchronous replication. Postgresql uses a file based log shipped to the followers when a transaction is committed. Logical replication starts by copying a snapshot of the data on the publisher database. Once that is done, changes on the publisher are sent to the subscriber as they occur in real time. The subscriber applies data changes in the order in which commits were made on the publisher side so that transactional consistency is guaranteed for the publications within any single subscription. DB replications are covered with RDBMS features and it offers low administration overhead. It is important to note that source and target data structures have to be the same, and change to the table structure is a challenge but can be addressed (usually mitigated by 3<sup>rd</sup> party tooling).</p> <p>Now the adoption of database replication features is linked to the data movement requirements. It may not be a suitable solution for microservice coexistance as there is a need to do data transformation on the fly.</p> <h3 id=multi-leaders>Multi leaders<a class=headerlink href=#multi-leaders title="Permanent link">&para;</a></h3> <p>With multi-leader configuration each leader gets write operations, and propagates data update notifications to all nodes. This is an active-active replication. And it is the practice when dealing with multiple datacenters. </p> <p><img alt src=../images/multi-lead.png></p> <p>The write operations are propagated asynchronously which is more permissive to network failure. It is important to note that the following problems need to be addressed with this topology:</p> <ul> <li>Update of the same data at the same time, leading to write conflict</li> <li>Using automatic primary key generation by the database may create duplicate keys</li> <li>Triggers that work on conditions on the data to do something could never be triggered due to data conditions that will never happen in this active - active configuration.</li> <li>Integrity constraints can be violated, as one records may be processed without the others being yet present.</li> </ul> <p>For the write conflict resolution, there are different strategies, one uses timestamps so the last write wins the record update, but this could lead to data lost. In fact conflict resolution will be dependant of the business logic and data knowledge. So custom code needs to be done to apply this logic to write conflicts.</p> <p>When there is more than two leaders, the replicas topology can be use a ring, star or all-to-all model, as illustrated in the figure below:</p> <p><img alt src=../images/multi-lead-topo.png></p> <p>With <strong>Ring</strong>, a leader forwards and propagates its own writes to one neighbor. With <strong>Star</strong> one designated root node forwards writes to all of the other nodes. Finally with <strong>All-to-all</strong>, every leader sends its writes to every other leader.</p> <p>With Ring and Star, a node failure impacts the data replication to any node, and with all-to-all we need to address looping on the same write. The mitigation is to use a unique identifier for each node, so a write event coming with the same node_id at the current node id is discarded.</p> <h3 id=leaderless>Leaderless<a class=headerlink href=#leaderless title="Permanent link">&para;</a></h3> <p>In this last replication technique, the client application is doing write operation on any replicas. There is no leader. This is the approach used by Cassandra and DynamoDB system. The write operations order is not maintained. With leaderless failover does not exist, in case of node failure the client has to accept n missing acknowledges. If the client read back data from a previously failed node, that just restarted, it may read old / stale data. To mitigate this problem, reads are done to multiple nodes in parallel, and the client needs to consolidate the returned value (may be using timestamp or version number). </p> <p>A node that is restarting can catch up on the replicated data by doing read repair or by using an anti-entropy process. Read repair, is done by the client seeing old value from one of the replica, and push back the new value to it. The anti-entropy process is in the database mechanism, with a daemon process running to replicate missing data to any replicas.</p> <h2 id=considerations>Considerations<a class=headerlink href=#considerations title="Permanent link">&para;</a></h2> <p>The main advantages for data replication (providing a consistent copy of data across data storage locations) are:</p> <ul> <li>increased data availability</li> <li>increased access performance by moving data close to users</li> <li>decreased network load</li> </ul> <p>Maintaining Data consistency at all different sites involves complex processes, and increase physical resources.</p> <h3 id=business-motivations>Business motivations<a class=headerlink href=#business-motivations title="Permanent link">&para;</a></h3> <p>Among the top three priority of data integration and integrity solution, for 2019 and 2020, are (<a href="https://www.idc.com/getdoc.jsp?containerId=IDC_P31631">source IDC</a>):</p> <ul> <li>Data intelligence (57%)</li> <li>Data replication (50%)</li> <li>Application data sync (51%)</li> </ul> <p>Two important derived use cases:</p> <ul> <li> <p><strong>Business in Real Time</strong>:</p> <ul> <li>Detect and react to data events as they happen to drive the business, and propagate those changes for others for consumption</li> <li>Optimize decision to sub-second latency level, i.e. real time analytics </li> </ul> </li> <li> <p><strong>Always On Information</strong></p> <ul> <li>High availability with Active-Standby and Active-Active data replication deployments</li> <li>Data synchronization for zero down time data migrations and upgrades</li> </ul> </li> </ul> <h2 id=technology-overview>Technology overview<a class=headerlink href=#technology-overview title="Permanent link">&para;</a></h2> <h3 id=data-lake-technologies>Data lake technologies<a class=headerlink href=#data-lake-technologies title="Permanent link">&para;</a></h3> <p>There are multiple alternatives to build a data lake solution. In the field, the following technologies are usually used: Hadoop, S3 bucket, Apache Spark, cloud object storage, and Apache Kafka. </p> <ul> <li> <p><strong>Hadoop/HDFS</strong> (Hadoop File System) is designed to process large relatively static data sets.<br> It provides a cost effective vehicle for storing massive amounts of data due to its commodity hardware underpinnings that rely on built in fault tolerance based on redundancy. Hadoop is ideal for highly unstructured data and for data that is changing at the file level. With Hadoop, you don’t change a record in a file. Rather, you write a new file.<br> A process reads through the files to discover the data that matters and to filter out unrelated data. It is massively scalable processing. </p> </li> <li> <p><strong>Apache Spark</strong> is a data processing engine tightly coupled with the Hadoop ecosystem. It is one of the most active open source projects ever. Spark is mainly used as ETL engine capable of integrating data from various SQL and NoSQL data sources and targets including RDBMS, NoSQL DB, Cloud Object Store, HDFS and other cluster file systems</p> </li> <li> <p><strong>COS (Cloud Object Storage)</strong> in conjunction with a Query Engine like Apache SparkSQL or <a href=https://cloud.ibm.com/catalog/services/sql-query>IBM Cloud SQLQuery</a> Service is a legit data lake solution, especially because, as a managed service, it provides unlimited capacity and very high scalability and robustness against failures. IBM Cloud SQL Query is a serverless service to read data in Cloud Object Storage, process it with full standard SQL syntax, and write the results to Cloud Object Storage or Db2. With SQL Query, you analyze and process data where it is stored - there is no ETL, no databases, and no infrastructure to manage. The service is highly available, offers a Multi-AZ deployment, and autoscales based on your workload.</p> </li> <li> <p><a href=https://jbcodeforce.github.io/aws-studies/infra/storage/#s3-simple-storage-service>AWS S3</a>.</p> </li> <li><strong>Kafka</strong> is designed from the outset to easily cope with constantly changing data and events. It has built in capabilities for data management such as log compaction that enable Kafka to emulate updates and deletes. The data storage may be self described JSON document wrapped in <a href=https://avro.apache.org/docs/current/ >Apache Avro</a> binary format. Kafka exploits the scalability and availability of inexpensive commodity hardware. Although Kafka supports persisting data in queues for weeks or even months, it's not yet a proved technology for long term storage, even if companies are already adopting it for event sourcing. Kafka provides a means of maintaining one and only one version of a “record” much like in a keyed database. But an adjustable persistence time window lets you control how much data is retained. Important to note that <a href=https://jbcodeforce.github.io/redpanda-studies/ >RedPanda</a> is a modern, fully compatible, to Kafka to support the same use cases, but also supporting webassembly to deploy code to broker.</li> </ul> <p>Data Replication solutions provide both bulk and continuous delivery of changing structured operational data to both Hadoop and Kafka. </p> <p>There are more and more organizations choosing to replicate their changing operational data to Kafka rather than directly into Hadoop. Kafka’s ability to self manage its storage, emulate the concept of a keyed record and provide self describing structural metadata combined with the benefits of scalability and open source interfaces makes it an ideal streaming and staging area for enterprise analytics. </p> <p>If needed, data can be staged in Kafka for periodic delivery into Hadoop for a more controlled data lake, preventing the lake from becoming a swamp with millions of files. </p> <p>Data stored in Kafka can be consumed by real time microservices and real time analytics engines.</p> <p>Kafka can also be used as a modern operational data store. It has the built in advantages of low cost scalability and fault tolerance with the benefits of open interfaces and an ever growing list of data producers (feeding data into Kafka) and data consumers (pulling data from Kafka), all with self managed storage.</p> <p>Other use cases are related to auditing and historical query on what happened on specific records. Using event sourcing, delivered out of the box with kafka, this will be easier to support. It can be used to propagate data changes to remote caches and invalidate them, to projection view in CQRS microservices, populate full text search in ElasticSearch, Apache Solr, etc...</p> <h3 id=change-data-capture-cdc>Change data capture (CDC)<a class=headerlink href=#change-data-capture-cdc title="Permanent link">&para;</a></h3> <p>Another important part of the architecture is the change data capture component. The following diagram presents a generic architecture for real time data replication, using transaction logs as source for data update, a change data capture agent to load data and send then as event over the network to an "Apply / Transform" agent responsible to persist to the target destination. </p> <p><img alt src=../images/data-replication-HL.png></p> <p>The data replication between databases by continuously propagate changes in real time instead of doing it by batch with traditional ETL products, brings data availability and consistency cross systems. It can be used to feed analytics system and data warehouses, for business intelligence activities.</p> <p>For example, IBM's <a href=https://www.ibm.com/us-en/marketplace/infosphere-data-replication>InfoSphere Data Replication (IIDR)</a> captures and replicates data in one run or only replicate changes made to the data, and delivers those changes to other environments and applications that need them in a trusted and guaranteed fashion, ensuring referential integrity and synchronization between sources and targets. The architecture diagram below presents the components involved in CDC replication:</p> <p><img alt src=../images/CDC_architecture.jpg></p> <p>Product explanations can be obtained <a href=https://www.ibm.com/support/knowledgecenter/en/SSTRGZ_11.4.0/com.ibm.cdcdoc.sysreq.doc/concepts/aboutcdc.html>here.</a></p> <p>We can combine Kafka and IIDR to support a flexible pub/sub architecture for data replication where databases are replicated but event streams about those data can be processed in real time by any applications and microservices. This is known as <a href=https://en.wikipedia.org/wiki/Lambda_architecture>lambda-architecture</a>.</p> <p>The combined architecture of a deployed solution looks like in the diagram below:</p> <p><img alt src=../images/iidr-archi.png></p> <p>With the management console, the developer can define a data replication project that can include one to many subscriptions. Subscriptions define the source database and tables and target kafka cluster and topics. </p> <p>The Kafka cluster can run on Kubernetes. </p> <p>The first time a subscription is running, a "Refresh" is performed: to allow the source and target to be exactly synchronized before the incremental, changes only get replicated down to the target. This means all the records in the source table will be written as Kafka events. </p> <p>When running a subscription the first time, Kafka topics are added: one to hold the records from the source table, and the second to keep track of which records have already been committed to the target. </p> <p>For more details about this solution see <a href=https://www.ibm.com/cloud/garage/dte/producttour/ibm-infosphere-data-replication-product-tour>this product tour</a>.</p> <h4 id=debezium>Debezium<a class=headerlink href=#debezium title="Permanent link">&para;</a></h4> <p><a href=https://debezium.io/ >Debezium</a> is an open source distributed platform for change data capture. It retrieves change events from transaction logs from different databases and use Kafka as backbone, and Kafka connect. It uses the approach of replicating one table to one Kafka topic. </p> <p>It can be used for data synchronization between microservices using CDC at a service level and propagate changes via Kafka. The implementation of the <a href=https://ibm-cloud-architecture.github.io/refarch-eda/evt-microservices/ED-patterns/#command-query-responsibility-segregation-cqrs-pattern>CQRS pattern</a> may be simplified with this capability. </p> <p><img alt=zoomify src=../images/cqrs-cdc.png></p> <h3 id=why-adopting-kafka-for-data-replication>Why adopting Kafka for data replication<a class=headerlink href=#why-adopting-kafka-for-data-replication title="Permanent link">&para;</a></h3> <p>Using Kafka as a integration layer brings the following advantages:</p> <ul> <li>Offload processing</li> <li>Data aggregation from multiple sources</li> <li>Deliver a common platform for staging to other data consumers</li> <li>Provide a storage system for duplicating data</li> <li>Buffer unprocessed messages</li> <li>Offers throughput and low end-to-end Latency </li> <li>Offers real time processing and retrospective analysis</li> <li>Can correlate streaming feeds of disparate formats</li> <li>Flexibility of input source and output targets</li> <li>Built in stream processing API on real time feeds with Kafka streams</li> <li>Commit Log</li> <li>Fault tolerance, scalability, multi-tenancy, speed, light-weight, multiple landing-zones.</li> </ul> <h3 id=kafka-connect>Kafka connect<a class=headerlink href=#kafka-connect title="Permanent link">&para;</a></h3> <p><a href=https://kafka.apache.org/documentation/#connect>Kafka connect</a> simplifies the integration between Kafka and other systems. It helps to standardize the integration via connectors and configuration files. It is a distributed, fault tolerant runtime able to easily scale horizontally. The set of connectors help developers to not re-implement consumers and producers for every type of data source.</p> <p>To get started please read <a href=https://kafka.apache.org/documentation/#connec>this introduction</a> from the product documentation. </p> <p>The Kafka connect workers are stateless and can run easily on Kubernetes or as standalone docker process. <code>Kafka Connect Source</code> is to get data to Kafka, and <code>Kafka Connect Sink</code> to get data out of Kafka.</p> <p><img alt src=../images/kconnect-arch.png></p> <p>A worker is a process. A connector is a re-usable piece of java code packaged as jars, and configuration. Both elements define a task. A connector can have multiple tasks. </p> <p>In distributed deployment, the connector supports scaling by adding new workers and performs rebalancing of worker tasks in case of worker failure. The configuration can be sent dynamically to the cluster via REST API.</p> <h2 id=recommended-readings>Recommended Readings<a class=headerlink href=#recommended-readings title="Permanent link">&para;</a></h2> <ul> <li><a href=https://www.ibm.com/cloud/garage/dte/producttour/ibm-infosphere-data-replication-product-tour>IBM InfoSphere Data Replication Product Tour</a></li> <li><a href=https://learning.oreilly.com/videos/apache-kafka-series>Kafka connect hands-on learning from Stéphane Maarek</a></li> <li><a href=https://www.ibm.com/support/knowledgecenter/en/SSTRGZ_11.4.0/com.ibm.cdcdoc.cdckafka.doc/concepts/before_install.html>Integrating IBM CDC Replication Engine with kafka</a></li> <li><a href=https://www.brianstorti.com/replication/ >Very good article from Brian Storti on data replication and consistency</a></li> <li><a href=https://www.postgresql.org/docs/current/warm-standby.html>PostgreSQL warm standby replication mechanism</a></li> <li><a href=https://medium.com/@ramesh.esl/change-data-capture-cdc-in-postgresql-7dee2d467d1b>Change Data Capture in PostgreSQL</a></li> <li><a href=https://www.packtpub.com/big-data-and-business-intelligence/postgresql-replication-second-edition>eBook: PostgreSQL Replication - Hans-Jürgen Schönig - Second Edition</a></li> <li><a href=http://galeracluster.com/library/documentation/weighted-quorum.html>Weighted quorum mechanism for cluster to select primary node</a></li> <li><a href=https://www.confluent.io/blog/no-more-silos-how-to-integrate-your-databases-with-apache-kafka-and-cdc>Using Kafka Connect as a CDC solution</a></li> <li><a href=https://debezium.io/docs/tutorial/ >Debezium tutorial</a></li> <li><a href=https://www.ibm.com/cloud/garage/practices/manage/ensure-data-resilience/ >Ensure data resilience - author: Neal Fishman</a></li> <li><a href=https://jbcodeforce.github.io/redpanda-studies/ >RedPanda</a></li> </ul> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../data-integration/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Data integration"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Data integration </div> </div> </a> <a href=../data-partitioning/ class="md-footer__link md-footer__link--next" aria-label="Next: Data partitioning"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Data partitioning </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2018 - 2024 Jerome Boyer </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/jbcodeforce target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://linkedin.com/in/jeromeboyer target=_blank rel=noopener title=linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> <a href target=_blank rel=noopener title class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480v-83.6c0-4 1.5-7.8 4.2-10.8l167.6-182.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8l-88.3-44.2C7.1 311.3.3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.annotate", "content.code.copy", "content.tooltips", "search.highlight", "navigation.instant", "navigation.instant.progress", "navigation.tabs", "navigation.instant", "navigation.tabs.sticky", "navigation.tracking", "navigation.footer", "navigation.tabs.sticky", "navigation.top"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.525ec568.min.js></script> </body> </html>