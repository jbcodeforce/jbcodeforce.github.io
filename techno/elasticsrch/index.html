<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Knowledge acquisition personal's notes, blog drafts"><link href=https://jeromeboyer.net/techno/elasticsrch/ rel=canonical><link href=../egeria/ rel=prev><link href=../../architecture/ibmcloud/ rel=next><link rel=icon href=../../images/logo-blue.drawio.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.5.39"><title>Elastic Search - Jerome Boyer's Personal Site</title><link rel=stylesheet href=../../assets/stylesheets/main.8c3ca2c6.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#elastic-search class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Jerome Boyer's Personal Site" class="md-header__button md-logo" aria-label="Jerome Boyer's Personal Site" data-md-component=logo> <img src=../../images/logo.drawio.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Jerome Boyer's Personal Site </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Elastic Search </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/jbcodeforce/jbcodeforce.github.io/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../about/ class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../coding/playground/ class=md-tabs__link> Coding </a> </li> <li class=md-tabs__item> <a href=../../blogs/consultant-job/ class=md-tabs__link> Knowledge base </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../apicurio/ class=md-tabs__link> Techno </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Jerome Boyer's Personal Site" class="md-nav__button md-logo" aria-label="Jerome Boyer's Personal Site" data-md-component=logo> <img src=../../images/logo.drawio.png alt=logo> </a> Jerome Boyer's Personal Site </label> <div class=md-nav__source> <a href=https://github.com/jbcodeforce/jbcodeforce.github.io/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1 id=__nav_1_label tabindex=0> <span class=md-ellipsis> Home </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../about/ class=md-nav__link> <span class=md-ellipsis> About </span> </a> </li> <li class=md-nav__item> <a href=../../skills/ class=md-nav__link> <span class=md-ellipsis> Skills </span> </a> </li> <li class=md-nav__item> <a href=../../blogs/ class=md-nav__link> <span class=md-ellipsis> Blogs </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1_4> <label class=md-nav__link for=__nav_1_4 id=__nav_1_4_label tabindex=0> <span class=md-ellipsis> Leasure </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_1_4_label aria-expanded=false> <label class=md-nav__title for=__nav_1_4> <span class="md-nav__icon md-icon"></span> Leasure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../astronomy/ class=md-nav__link> <span class=md-ellipsis> Astronomy </span> </a> </li> <li class=md-nav__item> <a href=../../astronomy/physic/ class=md-nav__link> <span class=md-ellipsis> Physic - Newton </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Coding </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Coding </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../coding/playground/ class=md-nav__link> <span class=md-ellipsis> Playground </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class=md-ellipsis> Dev & Ops </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Dev & Ops </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../coding/agile/ class=md-nav__link> <span class=md-ellipsis> Agile </span> </a> </li> <li class=md-nav__item> <a href=../../coding/git/ class=md-nav__link> <span class=md-ellipsis> Git summary </span> </a> </li> <li class=md-nav__item> <a href=../../coding/gitops/ class=md-nav__link> <span class=md-ellipsis> GitOps </span> </a> </li> <li class=md-nav__item> <a href=../../coding/tekton/ class=md-nav__link> <span class=md-ellipsis> Tekton </span> </a> </li> <li class=md-nav__item> <a href=../../coding/argocd/ class=md-nav__link> <span class=md-ellipsis> ArgoCD </span> </a> </li> <li class=md-nav__item> <a href=../../coding/finch/ class=md-nav__link> <span class=md-ellipsis> Finch </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> Fun problems </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Fun problems </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../fun/puzzles/ class=md-nav__link> <span class=md-ellipsis> puzzles </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4 id=__nav_2_4_label tabindex=0> <span class=md-ellipsis> Java </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Java </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../java/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../java/FAQ/ class=md-nav__link> <span class=md-ellipsis> Java FAQ </span> </a> </li> <li class=md-nav__item> <a href=../../java/concurrent/ class=md-nav__link> <span class=md-ellipsis> Concurrency </span> </a> </li> <li class=md-nav__item> <a href=../../java/funqy/ class=md-nav__link> <span class=md-ellipsis> Funqy </span> </a> </li> <li class=md-nav__item> <a href=../../java/microprofile/ class=md-nav__link> <span class=md-ellipsis> Microprofile 3.x </span> </a> </li> <li class=md-nav__item> <a href=../../java/openliberty/ class=md-nav__link> <span class=md-ellipsis> Open Liberty </span> </a> </li> <li class=md-nav__item> <a href=../../java/quarkus/ class=md-nav__link> <span class=md-ellipsis> Quarkus </span> </a> </li> <li class=md-nav__item> <a href=../../java/restassured/ class=md-nav__link> <span class=md-ellipsis> Rest assured </span> </a> </li> <li class=md-nav__item> <a href=../../java/springcloud/ class=md-nav__link> <span class=md-ellipsis> SpringCloud </span> </a> </li> <li class=md-nav__item> <a href=../../coding/testcontainer/ class=md-nav__link> <span class=md-ellipsis> TestContainer </span> </a> </li> <li class=md-nav__item> <a href=../../java/vertx/ class=md-nav__link> <span class=md-ellipsis> Vert.x </span> </a> </li> <li class=md-nav__item> <a href=../../java/java-vscode/ class=md-nav__link> <span class=md-ellipsis> VScode </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../podman/ class=md-nav__link> <span class=md-ellipsis> Podman </span> </a> </li> <li class=md-nav__item> <a href=../../coding/reactjs/ class=md-nav__link> <span class=md-ellipsis> React.js & next.js </span> </a> </li> <li class=md-nav__item> <a href=../../coding/istio/ class=md-nav__link> <span class=md-ellipsis> istio </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/python-code class=md-nav__link> <span class=md-ellipsis> Python </span> </a> </li> <li class=md-nav__item> <a href=../../coding/knative/ class=md-nav__link> <span class=md-ellipsis> Knative </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/vuejs-studies/ class=md-nav__link> <span class=md-ellipsis> Vue.js Studies </span> </a> </li> <li class=md-nav__item> <a href=https://cloudnative101.dev/ class=md-nav__link> <span class=md-ellipsis> Cloud native content IBM </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/angular-sandbox/ class=md-nav__link> <span class=md-ellipsis> Angular </span> </a> </li> <li class=md-nav__item> <a href=../../code-template/ class=md-nav__link> <span class=md-ellipsis> My code templates </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Knowledge base </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Knowledge base </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../blogs/consultant-job/ class=md-nav__link> <span class=md-ellipsis> The SA job </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> <span class=md-ellipsis> Leadership </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Leadership </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../leadership/first-90-days/ class=md-nav__link> <span class=md-ellipsis> 90 Days </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class=md-ellipsis> Architecture </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../architecture/system-design/ class=md-nav__link> <span class=md-ellipsis> Conduct System Design </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/eda-studies class=md-nav__link> <span class=md-ellipsis> Event Driven Architecture </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/tcpip/ class=md-nav__link> <span class=md-ellipsis> TPC/IP summary </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/flow-architectures/ class=md-nav__link> <span class=md-ellipsis> Flow architectures </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/streaming/ class=md-nav__link> <span class=md-ellipsis> Streaming processing </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/architectural-decisions/ class=md-nav__link> <span class=md-ellipsis> Architecture decision </span> </a> </li> <li class=md-nav__item> <a href="https://jbcodef orce.github.io/eda-studies/ddd" class=md-nav__link> <span class=md-ellipsis> DDD </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/DR/ class=md-nav__link> <span class=md-ellipsis> Disaster recovery </span> </a> </li> <li class=md-nav__item> <a href=../../coding/istio/ class=md-nav__link> <span class=md-ellipsis> istio </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/openshift-studies class=md-nav__link> <span class=md-ellipsis> Openshift Studies </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class=md-ellipsis> Methodology </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Methodology </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../methodology/design-thinking/ class=md-nav__link> <span class=md-ellipsis> Design Thinking </span> </a> </li> <li class=md-nav__item> <a href=../../methodology/data-intensive/ class=md-nav__link> <span class=md-ellipsis> Data intensive </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/eda-studies/event-storming/ class=md-nav__link> <span class=md-ellipsis> Event Storming </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/eda-studies/ddd/ class=md-nav__link> <span class=md-ellipsis> Domain driven design </span> </a> </li> <li class=md-nav__item> <a href=../../methodology/lean-startup/ class=md-nav__link> <span class=md-ellipsis> Lean startup </span> </a> </li> <li class=md-nav__item> <a href=../../methodology/pm/ class=md-nav__link> <span class=md-ellipsis> Product manager </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4_7> <label class=md-nav__link for=__nav_3_4_7 id=__nav_3_4_7_label tabindex=0> <span class=md-ellipsis> ABRD </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_4_7_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4_7> <span class="md-nav__icon md-icon"></span> ABRD </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../methodology/abrd/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../methodology/abrd/concept/ class=md-nav__link> <span class=md-ellipsis> Concepts </span> </a> </li> <li class=md-nav__item> <a href=../../methodology/abrd/harvesting/ class=md-nav__link> <span class=md-ellipsis> Rule Harvesting </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../methodology/narrative/ class=md-nav__link> <span class=md-ellipsis> Narratives </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5 id=__nav_3_5_label tabindex=0> <span class=md-ellipsis> Data </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../data/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../data/ class=md-nav__link> <span class=md-ellipsis> Iceberg & others </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/db-play/ class=md-nav__link> <span class=md-ellipsis> Database play </span> </a> </li> <li class=md-nav__item> <a href=../../data/data-topology/ class=md-nav__link> <span class=md-ellipsis> Data topology </span> </a> </li> <li class=md-nav__item> <a href=../../data/data-integration/ class=md-nav__link> <span class=md-ellipsis> Data integration </span> </a> </li> <li class=md-nav__item> <a href=../../data/data-replication/ class=md-nav__link> <span class=md-ellipsis> Data replication </span> </a> </li> <li class=md-nav__item> <a href=../../data/data-partitioning/ class=md-nav__link> <span class=md-ellipsis> Data partitioning </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/streaming/ class=md-nav__link> <span class=md-ellipsis> Streaming processing </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/opendatahub/ class=md-nav__link> <span class=md-ellipsis> OpenData Hub </span> </a> </li> <li class=md-nav__item> <a href=../../data/olap/ class=md-nav__link> <span class=md-ellipsis> OLAP </span> </a> </li> <li class=md-nav__item> <a href=../../data/cassandra/ class=md-nav__link> <span class=md-ellipsis> Cassandra </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_6> <label class=md-nav__link for=__nav_3_6 id=__nav_3_6_label tabindex=0> <span class=md-ellipsis> AI </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_6_label aria-expanded=false> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> AI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/ML-studies/#machine-learning class=md-nav__link> <span class=md-ellipsis> Machine learning </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/ML-studies/ml/deep-learning/ class=md-nav__link> <span class=md-ellipsis> Deep learning </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Techno </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Techno </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../apicurio/ class=md-nav__link> <span class=md-ellipsis> Apicurio </span> </a> </li> <li class=md-nav__item> <a href=../atlas/ class=md-nav__link> <span class=md-ellipsis> Atlas </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/yarfba class=md-nav__link> <span class=md-ellipsis> AWS body of knowledge </span> </a> </li> <li class=md-nav__item> <a href=../code-engine/ class=md-nav__link> <span class=md-ellipsis> Code Engine </span> </a> </li> <li class=md-nav__item> <a href=../databricks/ class=md-nav__link> <span class=md-ellipsis> Databricks </span> </a> </li> <li class=md-nav__item> <a href=../docker/ class=md-nav__link> <span class=md-ellipsis> Docker </span> </a> </li> <li class=md-nav__item> <a href=../decisions/drools/ class=md-nav__link> <span class=md-ellipsis> Drools </span> </a> </li> <li class=md-nav__item> <a href=../egeria/ class=md-nav__link> <span class=md-ellipsis> Egeria </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Elastic Search </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Elastic Search </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#value-proposition class=md-nav__link> <span class=md-ellipsis> Value proposition </span> </a> <nav class=md-nav aria-label="Value proposition"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#use-cases class=md-nav__link> <span class=md-ellipsis> Use cases </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#architecture class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#concepts class=md-nav__link> <span class=md-ellipsis> Concepts: </span> </a> </li> <li class=md-nav__item> <a href=#getting-started class=md-nav__link> <span class=md-ellipsis> Getting started </span> </a> <nav class=md-nav aria-label="Getting started"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#some-examples-playground class=md-nav__link> <span class=md-ellipsis> Some examples / playground </span> </a> </li> <li class=md-nav__item> <a href=#searching class=md-nav__link> <span class=md-ellipsis> Searching </span> </a> </li> <li class=md-nav__item> <a href=#data-modeling class=md-nav__link> <span class=md-ellipsis> Data Modeling </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#flattened-datatype class=md-nav__link> <span class=md-ellipsis> Flattened Datatype </span> </a> </li> <li class=md-nav__item> <a href=#deploying-on-openshift class=md-nav__link> <span class=md-ellipsis> Deploying on OpenShift </span> </a> </li> <li class=md-nav__item> <a href=#connect-kafka-sink-connector-to-elasticsearch class=md-nav__link> <span class=md-ellipsis> Connect Kafka Sink connector to Elasticsearch </span> </a> </li> <li class=md-nav__item> <a href=#tutorial class=md-nav__link> <span class=md-ellipsis> Tutorial </span> </a> </li> <li class=md-nav__item> <a href=#kibana class=md-nav__link> <span class=md-ellipsis> Kibana </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/flink-studies/ class=md-nav__link> <span class=md-ellipsis> Flink Studies </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_11> <label class=md-nav__link for=__nav_4_11 id=__nav_4_11_label tabindex=0> <span class=md-ellipsis> IBM </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_11_label aria-expanded=false> <label class=md-nav__title for=__nav_4_11> <span class="md-nav__icon md-icon"></span> IBM </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../architecture/ibmcloud/ class=md-nav__link> <span class=md-ellipsis> IBM Cloud </span> </a> </li> <li class=md-nav__item> <a href=../../architecture/satellite/ class=md-nav__link> <span class=md-ellipsis> IBM Cloud Satellite </span> </a> </li> <li class=md-nav__item> <a href=../cos/ class=md-nav__link> <span class=md-ellipsis> Cloud object storage </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_11_4> <label class=md-nav__link for=__nav_4_11_4 id=__nav_4_11_4_label tabindex=0> <span class=md-ellipsis> Cloud Pak Automation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_11_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_11_4> <span class="md-nav__icon md-icon"></span> Cloud Pak Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../cp4a/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../cp4a/bai/ class=md-nav__link> <span class=md-ellipsis> BAI </span> </a> </li> <li class=md-nav__item> <a href=../cp4a/odm/ class=md-nav__link> <span class=md-ellipsis> ODM </span> </a> </li> <li class=md-nav__item> <a href=../cp4a/ads/ class=md-nav__link> <span class=md-ellipsis> Automation Decision Service </span> </a> </li> <li class=md-nav__item> <a href=../cp4a/process-mining/ class=md-nav__link> <span class=md-ellipsis> Process mining </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_11_5> <label class=md-nav__link for=__nav_4_11_5 id=__nav_4_11_5_label tabindex=0> <span class=md-ellipsis> Cloud Pak integration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_11_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_11_5> <span class="md-nav__icon md-icon"></span> Cloud Pak integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../integration/cp4i/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../integration/apic/ class=md-nav__link> <span class=md-ellipsis> APIC </span> </a> </li> <li class=md-nav__item> <a href=../integration/eepm/ class=md-nav__link> <span class=md-ellipsis> EEPM </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_11_5_4> <label class=md-nav__link for=__nav_4_11_5_4 id=__nav_4_11_5_4_label tabindex=0> <span class=md-ellipsis> MQ </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_4_11_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_11_5_4> <span class="md-nav__icon md-icon"></span> MQ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../integration/mq/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../java/mqChallenge/ class=md-nav__link> <span class=md-ellipsis> MQ challenge </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/kafka-studies class=md-nav__link> <span class=md-ellipsis> Kafka Studies </span> </a> </li> <li class=md-nav__item> <a href=../kar/ class=md-nav__link> <span class=md-ellipsis> KAR </span> </a> </li> <li class=md-nav__item> <a href=../microcks/ class=md-nav__link> <span class=md-ellipsis> Microcks </span> </a> </li> <li class=md-nav__item> <a href=../minikube/ class=md-nav__link> <span class=md-ellipsis> Minikube </span> </a> </li> <li class=md-nav__item> <a href=../podman/ class=md-nav__link> <span class=md-ellipsis> Podman </span> </a> </li> <li class=md-nav__item> <a href=../prometheus/ class=md-nav__link> <span class=md-ellipsis> Prometheus </span> </a> </li> <li class=md-nav__item> <a href=../rancherdesktop/ class=md-nav__link> <span class=md-ellipsis> Rancher Desktop </span> </a> </li> <li class=md-nav__item> <a href=../redis/ class=md-nav__link> <span class=md-ellipsis> Redis </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/redpanda-studies/ class=md-nav__link> <span class=md-ellipsis> Red Panda </span> </a> </li> <li class=md-nav__item> <a href=../scaleway/ class=md-nav__link> <span class=md-ellipsis> Scaleway </span> </a> </li> <li class=md-nav__item> <a href=../solr/ class=md-nav__link> <span class=md-ellipsis> Solr </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/spark-studies/ class=md-nav__link> <span class=md-ellipsis> Spark Studies </span> </a> </li> <li class=md-nav__item> <a href=../../java/java-vscode/ class=md-nav__link> <span class=md-ellipsis> VScode </span> </a> </li> <li class=md-nav__item> <a href=../wsl2/ class=md-nav__link> <span class=md-ellipsis> WSL2-Ubuntu </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#value-proposition class=md-nav__link> <span class=md-ellipsis> Value proposition </span> </a> <nav class=md-nav aria-label="Value proposition"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#use-cases class=md-nav__link> <span class=md-ellipsis> Use cases </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#architecture class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=#concepts class=md-nav__link> <span class=md-ellipsis> Concepts: </span> </a> </li> <li class=md-nav__item> <a href=#getting-started class=md-nav__link> <span class=md-ellipsis> Getting started </span> </a> <nav class=md-nav aria-label="Getting started"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#some-examples-playground class=md-nav__link> <span class=md-ellipsis> Some examples / playground </span> </a> </li> <li class=md-nav__item> <a href=#searching class=md-nav__link> <span class=md-ellipsis> Searching </span> </a> </li> <li class=md-nav__item> <a href=#data-modeling class=md-nav__link> <span class=md-ellipsis> Data Modeling </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#flattened-datatype class=md-nav__link> <span class=md-ellipsis> Flattened Datatype </span> </a> </li> <li class=md-nav__item> <a href=#deploying-on-openshift class=md-nav__link> <span class=md-ellipsis> Deploying on OpenShift </span> </a> </li> <li class=md-nav__item> <a href=#connect-kafka-sink-connector-to-elasticsearch class=md-nav__link> <span class=md-ellipsis> Connect Kafka Sink connector to Elasticsearch </span> </a> </li> <li class=md-nav__item> <a href=#tutorial class=md-nav__link> <span class=md-ellipsis> Tutorial </span> </a> </li> <li class=md-nav__item> <a href=#kibana class=md-nav__link> <span class=md-ellipsis> Kibana </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=elastic-search>Elastic Search<a class=headerlink href=#elastic-search title="Permanent link">&para;</a></h1> <p>Open source project to offer RESTful search and analytics engine for all types of data including textual, numerical, geospatial, structured or unstructured.</p> <h2 id=value-proposition>Value proposition<a class=headerlink href=#value-proposition title="Permanent link">&para;</a></h2> <ul> <li>Add search capability to a web or mobile app</li> <li>Support NoSQL query and build indexes</li> <li>Keep index in shards distributed over a cluster. Expose federated indexing and search capabilities across all servers within the cluster. Cluster can be extended by adding new node.</li> <li>Near real time between when indexing a document and until it becomes searchable.</li> <li>Combined with Kibana to present data, build dashboards and manage ES. Even supports some machine learning execution.</li> <li>Store a vast volume of data</li> </ul> <h3 id=use-cases>Use cases<a class=headerlink href=#use-cases title="Permanent link">&para;</a></h3> <ul> <li>Time series data like logs. ELK stack. IT operations</li> <li>Search on unstructured data: website search, URL search, ride data</li> <li>Analytics: maketing insights, customer sentiment, fraud detection, anomaly detection.</li> <li>Data sources for Data scientists</li> </ul> <h2 id=architecture>Architecture<a class=headerlink href=#architecture title="Permanent link">&para;</a></h2> <ul> <li>Start as a scalable Lucene to be an horizontal scalable search engine</li> <li>This is a server to return json payload.</li> <li>Kibana is the Web UI for searching and visualizing with complex analytics, graphs...</li> <li>Can be use to aggregate logs.</li> <li>Logstash and Beats feed data into elasticsearch, but not just Log files</li> <li>X-Pack: to add security, alerting, monitoring, reporting, machine learning and Graph exploration</li> </ul> <h2 id=concepts>Concepts:<a class=headerlink href=#concepts title="Permanent link">&para;</a></h2> <ul> <li><strong>Documents</strong>: things we are searching for, text or Json. Every document has a unique ID and a type. They are immutable and has a <code>_version</code> field which is increased at each update. Old documents are marked for deletion.</li> <li><strong>Indices</strong>: supports search into all documents within a collection of types. Indices contain <em>inverted indices</em> that let us search across everything within them at once. <em>Mappings</em> define schema for the data within.</li> <li>TF-IDF: Term Frequency (how often a term appears in a given document) * Inverse Document Frequency (term appears in all document). TF/ DF measures the <em>relevance</em> of a term in a document.</li> <li>Use REST API to search and post document.</li> <li>An index is split into Shards. Documents are hashed to particular shard. </li> <li>An index has two primary shards and two replicas. </li> <li>Write requests are routed to the primary shard then replicated</li> <li>Read requests are routed to the primary or any replica</li> <li>Number of primary shards can not be changed later</li> <li>As a fully distributed solution, two clients can try to update at the same time. So Elasticsearch uses the "Optimistic Consurrency Control", by adding <code>_seq_no</code> and <code>_primary_term</code> fields to each document. With those fields a second update will generate an error. </li> </ul> <h2 id=getting-started>Getting started<a class=headerlink href=#getting-started title="Permanent link">&para;</a></h2> <p>See docker compose under <code>studies/elasticsearch</code> folder and <a href=https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html>this note</a> or the <a href=https://github.com/ibm-cloud-architecture/eda-rt-inventory-gitops/blob/main/local-demo/kstreams/docker-compose-all.yaml>rt-inventory gitops</a> repo for a local run.</p> <p>Assess the node: <code>curl -X GET "localhost:9200/_cat/nodes?v&amp;pretty"</code>.</p> <p>Access to Kibana: <a href=http://localhost:5601/app/home>http://localhost:5601/app/home</a></p> <p>Use Kibana dev tools console to put documents and do query.</p> <p>From first experience with Kibana, use the <code>Sample eCommerce orders</code> from Analytics &gt; Overview &gt; Add data menu. See <a href=https://www.elastic.co/guide/en/kibana/7.x/get-started.html>this kibana tutorial</a>.</p> <h3 id=some-examples-playground>Some examples / playground<a class=headerlink href=#some-examples-playground title="Permanent link">&para;</a></h3> <p>The files are in this project: <code>studies/elasticsearch/ml-latest-small</code> folder.</p> <ul> <li>Upload a movie:</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>curl<span class=w> </span>-X<span class=w> </span>PUT<span class=w> </span>localhost:9200/movies/_doc/109487<span class=w> </span>-H<span class=w> </span><span class=s1>&#39;content-type: application/json&#39;</span><span class=w> </span>-d<span class=w> </span><span class=s1>&#39;</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=s1>{</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=s1>    &quot;genre&quot;: [&quot;IMAX&quot;, &quot;Sci-Fi&quot;], &quot;title&quot;: &quot;Interstellar&quot;, &quot;year&quot;: 2024</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=s1>}</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=s1>&#39;</span>
</code></pre></div> <p>The ouput is </p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>{&quot;_index&quot;:&quot;movies&quot;,&quot;_id&quot;:&quot;109487&quot;,&quot;_version&quot;:1,&quot;result&quot;:&quot;created&quot;,&quot;_shards&quot;:{&quot;total&quot;:2,&quot;successful&quot;:1,&quot;failed&quot;:0},&quot;_seq_no&quot;:0,&quot;_primary_term&quot;:1}
</code></pre></div> <ul> <li>Upload movies using bulk API</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>curl<span class=w> </span>-X<span class=w> </span>POST<span class=w> </span>localhost:9200/movies/_bulk<span class=w> </span>-H<span class=w> </span><span class=s1>&#39;content-type: application/json&#39;</span><span class=w> </span>-d<span class=s1>&#39;@movies.json&#39;</span>
</code></pre></div> <ul> <li>Upload a new collection</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>curl<span class=w> </span>-X<span class=w> </span>PUT<span class=w> </span>localhost:9200/_bulk<span class=w>  </span>-H<span class=w> </span><span class=s1>&#39;content-type: application/json&#39;</span><span class=w> </span>--data-binary<span class=w> </span>@series.json
</code></pre></div> <p><a href=https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html>Bulk API documentation</a></p> <ul> <li>To specify a date mapping do</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>curl<span class=w> </span>-X<span class=w> </span>PUT<span class=w> </span>localhost:9200/movies<span class=w> </span>-H<span class=w> </span><span class=s1>&#39;content-type: application/json&#39;</span><span class=w> </span>-d<span class=w> </span><span class=s1>&#39;</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=s1>{</span>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=s1>    &quot;mappings&quot;: {</span>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=s1>        &quot;properties&quot;: {</span>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=s1>            &quot;year&quot; : { &quot;type&quot;: &quot;date&quot; }</span>
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=s1>        }</span>
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=s1>    }</span>
<a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=s1>}</span>
<a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a><span class=s1>&#39;</span>
<a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a><span class=c1># Verify</span>
<a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a>
<a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a>curl<span class=w> </span>-X<span class=w> </span>GET<span class=w> </span>localhost:9200/movies/_mapping
</code></pre></div> <ul> <li> <p>Some other common mappings: </p> <ul> <li>Not analyzing a field for search</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=nt>&quot;properties&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>        </span><span class=nt>&quot;genre&quot;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nt>&quot;index&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;not_analyzed&quot;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>    </span><span class=p>}</span>
</code></pre></div> <ul> <li>Field analyzer: to do character filters, tokenizer, and token filter</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=nt>&quot;properties&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>        </span><span class=nt>&quot;description&quot;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nt>&quot;analyzer&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;english&quot;</span><span class=w> </span><span class=p>}</span>
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>    </span><span class=p>}</span>
</code></pre></div> </li> <li> <p>Search using <a href=https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html>Lucene query DSL</a></p> </li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=c1># with ID</span>
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>curl<span class=w> </span>-X<span class=w> </span>GET<span class=w> </span><span class=s2>&quot;localhost:9200/movies/_doc/58559?pretty&quot;</span>
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=c1># with query</span>
<a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a>curl<span class=w> </span>-X<span class=w> </span>GET<span class=w> </span><span class=s2>&quot;localhost:9200/movies/_search?pretty&quot;</span><span class=w> </span>-H<span class=w> </span><span class=s1>&#39;Content-Type: application/json&#39;</span><span class=w> </span>-d<span class=s1>&#39;</span>
<a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=s1>{</span>
<a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=s1>  &quot;query&quot;: {</span>
<a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=s1>    &quot;match&quot;: {</span>
<a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a><span class=s1>      &quot;title&quot;: &quot;Star Trek&quot;  </span>
<a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a><span class=s1>    }</span>
<a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a><span class=s1>  }</span>
<a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a><span class=s1>}</span>
<a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a><span class=s1>&#39;</span>
</code></pre></div> <p>The results will include records wil Star or Trek or both in the title. It will add a confident <code>_score</code>.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=w>  </span><span class=nt>&quot;max_score&quot;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=mf>2.4749136</span><span class=p>,</span>
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=w>  </span><span class=nt>&quot;hits&quot;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=w>      </span><span class=p>{</span>
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=w>        </span><span class=nt>&quot;_index&quot;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=s2>&quot;movies&quot;</span><span class=p>,</span>
<a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=w>        </span><span class=nt>&quot;_id&quot;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=s2>&quot;135569&quot;</span><span class=p>,</span>
<a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=w>        </span><span class=nt>&quot;_score&quot;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=mf>2.4749136</span><span class=p>,</span>
<a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=w>        </span><span class=nt>&quot;_source&quot;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=w>          </span><span class=nt>&quot;id&quot;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=s2>&quot;135569&quot;</span><span class=p>,</span>
<a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a><span class=w>          </span><span class=nt>&quot;title&quot;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Star Trek Beyond&quot;</span><span class=p>,</span>
<a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a><span class=w>          </span><span class=nt>&quot;year&quot;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=mi>2016</span><span class=p>,</span>
<a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a><span class=w>          </span><span class=nt>&quot;genre&quot;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a><span class=w>            </span><span class=s2>&quot;Action&quot;</span><span class=p>,</span>
<a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a><span class=w>            </span><span class=s2>&quot;Adventure&quot;</span><span class=p>,</span>
<a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a><span class=w>            </span><span class=s2>&quot;Sci-Fi&quot;</span>
<a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a><span class=w>          </span><span class=p>]</span>
<a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-8-17 name=__codelineno-8-17 href=#__codelineno-8-17></a><span class=w>      </span><span class=p>},</span>
<a id=__codelineno-8-18 name=__codelineno-8-18 href=#__codelineno-8-18></a><span class=w>      </span><span class=p>{</span>
<a id=__codelineno-8-19 name=__codelineno-8-19 href=#__codelineno-8-19></a><span class=w>        </span><span class=nt>&quot;_index&quot;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=s2>&quot;movies&quot;</span><span class=p>,</span>
<a id=__codelineno-8-20 name=__codelineno-8-20 href=#__codelineno-8-20></a><span class=w>        </span><span class=nt>&quot;_id&quot;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=s2>&quot;122886&quot;</span><span class=p>,</span>
<a id=__codelineno-8-21 name=__codelineno-8-21 href=#__codelineno-8-21></a><span class=w>        </span><span class=nt>&quot;_score&quot;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=mf>0.6511494</span><span class=p>,</span>
<a id=__codelineno-8-22 name=__codelineno-8-22 href=#__codelineno-8-22></a><span class=w>        </span><span class=nt>&quot;_source&quot;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-8-23 name=__codelineno-8-23 href=#__codelineno-8-23></a><span class=w>          </span><span class=nt>&quot;id&quot;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=s2>&quot;122886&quot;</span><span class=p>,</span>
<a id=__codelineno-8-24 name=__codelineno-8-24 href=#__codelineno-8-24></a><span class=w>          </span><span class=nt>&quot;title&quot;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Star Wars: Episode VII - The Force Awakens&quot;</span><span class=p>,</span>
<a id=__codelineno-8-25 name=__codelineno-8-25 href=#__codelineno-8-25></a><span class=w>          </span><span class=nt>&quot;year&quot;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=mi>2015</span><span class=p>,</span>
<a id=__codelineno-8-26 name=__codelineno-8-26 href=#__codelineno-8-26></a><span class=w>          </span><span class=nt>&quot;genre&quot;</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<a id=__codelineno-8-27 name=__codelineno-8-27 href=#__codelineno-8-27></a><span class=w>            </span><span class=s2>&quot;Action&quot;</span><span class=p>,</span>
<a id=__codelineno-8-28 name=__codelineno-8-28 href=#__codelineno-8-28></a><span class=w>            </span><span class=s2>&quot;Adventure&quot;</span><span class=p>,</span>
<a id=__codelineno-8-29 name=__codelineno-8-29 href=#__codelineno-8-29></a><span class=w>            </span><span class=s2>&quot;Fantasy&quot;</span><span class=p>,</span>
<a id=__codelineno-8-30 name=__codelineno-8-30 href=#__codelineno-8-30></a><span class=w>            </span><span class=s2>&quot;Sci-Fi&quot;</span><span class=p>,</span>
<a id=__codelineno-8-31 name=__codelineno-8-31 href=#__codelineno-8-31></a><span class=w>            </span><span class=s2>&quot;IMAX&quot;</span>
<a id=__codelineno-8-32 name=__codelineno-8-32 href=#__codelineno-8-32></a><span class=w>          </span><span class=p>]</span>
<a id=__codelineno-8-33 name=__codelineno-8-33 href=#__codelineno-8-33></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-8-34 name=__codelineno-8-34 href=#__codelineno-8-34></a><span class=w>      </span><span class=p>}</span>
</code></pre></div> <ul> <li><strong>Update:</strong> can be done with a PUT and the full document as payload or use a partial update with a POST.</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>curl<span class=w> </span>-X<span class=w> </span>PUT<span class=w>  </span>-H<span class=w> </span><span class=s1>&#39;content-type: application/json&#39;</span><span class=w>  </span>localhost:9200/movies/_doc/109487<span class=w>  </span>-d<span class=w> </span><span class=s1>&#39;\n{\n    &quot;genre&quot;: [&quot;IMAX&quot;, &quot;Sci-Fi&quot;], &quot;title&quot;: &quot;Interstellar&quot;, &quot;year&quot;: 2024\n}\n&#39;</span>
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=c1># OR Partial update</span>
<a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>curl<span class=w> </span>-X<span class=w> </span>POST<span class=w>  </span>-H<span class=w> </span><span class=s1>&#39;content-type: application/json&#39;</span><span class=w>  </span>localhost:9200/movies/_doc/109487/_update<span class=w> </span>-d<span class=w> </span><span class=s1>&#39;{&quot;title&quot;: &quot;Interstellar 2&quot;}&#39;</span>
<a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=c1># Partial update with retry conflict</span>
<a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>curl<span class=w> </span>-X<span class=w> </span>POST<span class=w>  </span>-H<span class=w> </span><span class=s1>&#39;content-type: application/json&#39;</span><span class=w>  </span>localhost:9200/movies/_doc/109487/_update?retry_on_conflict<span class=o>=</span><span class=m>5</span><span class=w> </span>-d<span class=w> </span><span class=s1>&#39;{&quot;doc&quot;: {&quot;title&quot;: &quot;Interstellar 2&quot;}}&#39;</span>
</code></pre></div> <h3 id=searching>Searching<a class=headerlink href=#searching title="Permanent link">&para;</a></h3> <p>To search on exact word, for example on some enumerated value, use a mapping for the enumerated field to be of type <code>keyword</code>.</p> <h3 id=data-modeling>Data Modeling<a class=headerlink href=#data-modeling title="Permanent link">&para;</a></h3> <p>Recall that, <strong>normalized</strong> data is used to reduce storage space, and it makes easy to change one field in one of the aggregated records. But it requires two queries to get the full expected data: the movie title and the rating.</p> <p>For parent-child relationship we can create series by joining two collections. This is done by defining a mappings of type <code>join</code>.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>curl<span class=w> </span>-X<span class=w> </span>PUT<span class=w> </span>localhost:9200/series<span class=w> </span>-H<span class=w> </span><span class=s1>&#39;content-type: application/json&#39;</span><span class=w> </span>-d<span class=w> </span><span class=s1>&#39;</span>
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=s1>{</span>
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=s1>    &quot;mappings&quot;: {</span>
<a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=s1>        &quot;properties&quot;: {</span>
<a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=s1>            &quot;film_to_franchise&quot; : {</span>
<a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=s1>                &quot;type&quot;: &quot;join&quot;,</span>
<a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=s1>                &quot;relations&quot;: {&quot;franchise&quot;: &quot;film&quot; }</span>
<a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=s1>            }</span>
<a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a><span class=s1>        }</span>
<a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a><span class=s1>    }</span>
<a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a><span class=s1>}&#39;</span>
<a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a><span class=c1># results</span>
<a id=__codelineno-10-13 name=__codelineno-10-13 href=#__codelineno-10-13></a><span class=o>{</span><span class=s2>&quot;acknowledged&quot;</span>:true,<span class=s2>&quot;shards_acknowledged&quot;</span>:true,<span class=s2>&quot;index&quot;</span>:<span class=s2>&quot;series&quot;</span><span class=o>}</span>
</code></pre></div> * Get default mappings for an index</p> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>curl<span class=w> </span>-XGET<span class=w> </span><span class=s2>&quot;http://127.0.0.1:9200/demo-default/_mapping?pretty=true&quot;</span>
</code></pre></div> <ul> <li>Upload data: (see folde/studies/elasticsearch/ml-latest-small)</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a>curl<span class=w> </span>-X<span class=w> </span>PUT<span class=w> </span>localhost:9200/_bulk<span class=w>  </span>-H<span class=w> </span><span class=s1>&#39;content-type: application/json&#39;</span><span class=w> </span>--data-binary<span class=w> </span>@series.json
</code></pre></div> <ul> <li>Search using the parent - child relationship <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=p>{</span><span class=w> </span>
<a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=w>    </span><span class=nt>&quot;query&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w> </span>
<a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=w>        </span><span class=nt>&quot;has_parent&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w> </span>
<a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=w>            </span><span class=nt>&quot;parent_type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;franchise&quot;</span><span class=p>,</span><span class=w> </span>
<a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=w>            </span><span class=nt>&quot;query&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=w>                </span><span class=nt>&quot;match&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w> </span>
<a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=w>                    </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Star Wars&quot;</span><span class=p>}</span>
<a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a><span class=w>            </span><span class=p>}</span>
<a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a><span class=p>}</span>
</code></pre></div></li> </ul> <p>Should return the films from Start Wars franchise.</p> <p>or</p> <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=p>{</span><span class=w> </span>
<a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=w>    </span><span class=nt>&quot;query&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w> </span>
<a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w>        </span><span class=nt>&quot;has_child&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w> </span>
<a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=w>            </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;film&quot;</span><span class=p>,</span><span class=w> </span>
<a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=w>            </span><span class=nt>&quot;query&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=w>                </span><span class=nt>&quot;match&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w> </span>
<a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=w>                    </span><span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;The Force Awakens&quot;</span><span class=p>}</span>
<a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=w>            </span><span class=p>}</span>
<a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a><span class=p>}</span>
</code></pre></div> <p>Should return "Star Wars" franchise.</p> <h2 id=flattened-datatype>Flattened Datatype<a class=headerlink href=#flattened-datatype title="Permanent link">&para;</a></h2> <p>To control the explosion of mappings, when the data model is hierarchy, ElasticSearch uses the concepts of flattened datatype. The host content is flattened:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a>curl<span class=w> </span>-XPUT<span class=w> </span><span class=s2>&quot;http://127.0.0.1:9200/demo-flattened/_mapping&quot;</span><span class=w> </span>-d<span class=s1>&#39;{</span>
<a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=s1>  &quot;properties&quot;: {</span>
<a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=s1>    &quot;host&quot;: {</span>
<a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=s1>      &quot;type&quot;: &quot;flattened&quot;</span>
<a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=s1>    }</span>
<a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=s1>  }</span>
<a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=s1>}&#39;</span>
</code></pre></div> <p>No tokenizer or analyzer will be used in flattened. </p> <h2 id=deploying-on-openshift>Deploying on OpenShift<a class=headerlink href=#deploying-on-openshift title="Permanent link">&para;</a></h2> <p>Use OpenShift Operator Hub and elasticsearch community operator.</p> <p>See <a href=https://www.elastic.co/guide/en/cloud-on-k8s/1.6/k8s-quickstart.html>the ECK quickstart</a>.</p> <h2 id=connect-kafka-sink-connector-to-elasticsearch>Connect Kafka Sink connector to Elasticsearch<a class=headerlink href=#connect-kafka-sink-connector-to-elasticsearch title="Permanent link">&para;</a></h2> <ul> <li>Here a json to send to distributed kafka connector:</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=p>{</span>
<a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;elastic-sink&quot;</span><span class=p>,</span>
<a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=w>    </span><span class=nt>&quot;config&quot;</span><span class=p>:</span>
<a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=w>    </span><span class=p>{</span>
<a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=w>        </span><span class=nt>&quot;connector.class&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;com.ibm.eventstreams.connect.elasticsink.ElasticSinkConnector&quot;</span><span class=p>,</span>
<a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=w>        </span><span class=nt>&quot;tasks.max&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;1&quot;</span><span class=p>,</span>
<a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a><span class=w>        </span><span class=nt>&quot;topics&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;store.inventory,item.inventory&quot;</span><span class=p>,</span>
<a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=w>        </span><span class=nt>&quot;es.connection&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;elastic:9200&quot;</span><span class=p>,</span>
<a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a><span class=w>        </span><span class=nt>&quot;es.document.builder&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;com.ibm.eventstreams.connect.elasticsink.builders.JsonDocumentBuilder&quot;</span><span class=p>,</span>
<a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a><span class=w>        </span><span class=nt>&quot;es.index.builder&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;com.ibm.eventstreams.connect.elasticsink.builders.DefaultIndexBuilder&quot;</span><span class=p>,</span>
<a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a><span class=w>        </span><span class=nt>&quot;es.identifier.builder&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;com.ibm.eventstreams.connect.elasticsink.builders.DefaultIdentifierBuilder&quot;</span><span class=p>,</span>
<a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a><span class=w>        </span><span class=nt>&quot;key.converter&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;org.apache.kafka.connect.storage.StringConverter&quot;</span><span class=p>,</span>
<a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a><span class=w>        </span><span class=nt>&quot;value.converter&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;org.apache.kafka.connect.json.JsonConverter&quot;</span><span class=p>,</span>
<a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a><span class=w>        </span><span class=nt>&quot;value.converter.schemas.enable&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;false&quot;</span>
<a id=__codelineno-16-15 name=__codelineno-16-15 href=#__codelineno-16-15></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-16-16 name=__codelineno-16-16 href=#__codelineno-16-16></a><span class=p>}</span>
</code></pre></div> <ul> <li>Command is in <a href=https://github.com/ibm-cloud-architecture/eda-rt-inventory-gitops/blob/main/local-demo/kstreams/sendESSinkConfig.sh>the sendESSinkConfig script here</a></li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a>curl<span class=w> </span>-X<span class=w> </span>POST<span class=w>  </span>-w<span class=w> </span><span class=s2>&quot;%{http_code}&quot;</span><span class=w> </span>-H<span class=w> </span><span class=s1>&#39;content-type: application/json&#39;</span><span class=w> </span>-d@<span class=s2>&quot;../kconnect/elastic-sink.json&quot;</span><span class=w> </span>http://<span class=nv>$1</span>/connectors
</code></pre></div> <h2 id=tutorial>Tutorial<a class=headerlink href=#tutorial title="Permanent link">&para;</a></h2> <ul> <li><a href=https://sundog-education.com/elasticsearch/ >Sundog's material from the Udimy training</a></li> <li><a href=https://quarkus.io/guides/elasticsearch>Quarkus elasticsearch guide</a> for simple CRUD of java bean to json doc into ES.</li> </ul> <h2 id=kibana>Kibana<a class=headerlink href=#kibana title="Permanent link">&para;</a></h2> <p><a href=https://www.elastic.co/guide/en/kibana/current/index.html>Product documentation</a></p> <p>Major constructs we can manage in Kibana:</p> <ul> <li>Analytics</li> <li>Ingestion</li> <li>Indices</li> <li>Data Views</li> </ul> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../egeria/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Egeria"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Egeria </div> </div> </a> <a href=../../architecture/ibmcloud/ class="md-footer__link md-footer__link--next" aria-label="Next: IBM Cloud"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> IBM Cloud </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2018 - 2024 Jerome Boyer </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/jbcodeforce target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://linkedin.com/in/jeromeboyer target=_blank rel=noopener title=linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> <a href target=_blank rel=noopener title class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480v-83.6c0-4 1.5-7.8 4.2-10.8l167.6-182.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8l-88.3-44.2C7.1 311.3.3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.annotate", "content.code.copy", "content.tooltips", "search.highlight", "navigation.instant", "navigation.instant.progress", "navigation.tabs", "navigation.instant", "navigation.tabs.sticky", "navigation.tracking", "navigation.footer", "navigation.tabs.sticky", "navigation.top"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.525ec568.min.js></script> </body> </html>